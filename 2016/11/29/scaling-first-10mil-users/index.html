<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Liveblog: Scaling to Your First 10 Million Users - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Liveblog: Scaling to Your First 10 Million Users - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Liveblog: Scaling to Your First 10 Million Users - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2016/11/29/scaling-first-10mil-users/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Liveblog: Scaling to Your First 10 Million Users</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 299 May 292929 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/liveblog">Liveblog</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;1082 words (estimated 6 minutes to read)</span>
  <p>This is a liveblog of the AWS re:Invent session titled &ldquo;Scaling to Your First 10 Million Users.&rdquo; It&rsquo;s my first session of the week here at re:Invent; yesterday&rsquo;s sessions were full and I couldn&rsquo;t get into anything. (The crowds here at the event are pretty significant; I think I heard 32K attendees total.) The speaker for the session is Joel Williams, an AWS Solutions Architect.</p>
<p>Williams starts out with a brief blurb about how this session is a perennial favorite at re:Invent, and how the principles are fundamental to working in building solutions in/on AWS. Even if attendees don&rsquo;t have the sort of immediate scaling needs that Williams may be describing in this session, he believes that the lessons/fundamentals he discusses are applicable to lots of customers, lots of applications, and lots of use cases.</p>
<p>Williams starts out by saying that while Auto-Scaling is a destination on customers&rsquo; scaling journey, it&rsquo;s <em>not</em> where you want to start. It&rsquo;s not a &ldquo;magic button&rdquo; that fixes all problems. Williams puts up a map that shows AWS&rsquo; 14 global regions, encompassing 38 different availability zones, and points out that availability zones are a fundamental building block for highly-available applications. The next map Williams shows depicts AWS&rsquo; 60+ global points of presence (POPs), where you can employ services like Route 53 or CloudFront.</p>
<p>Looking at AWS&rsquo; services, some of them are <em>inherently</em> highly available and fault tolerant. Those include CloudFront, Route 53, S3, DynamoDB, ELBs, EFS, Lambda, SQS, etc. Other services, like EC2, can be made highly available with a little effort from the user/consumer.</p>
<p>One way to scale is by scaling to a bigger box, i.e., scaling to a larger instance type. This may help, but you <em>will</em> eventually hit a wall&mdash;you can&rsquo;t scale vertically indefinitely. Further, scaling up doesn&rsquo;t address availability or redundancy.</p>
<p>Williams suggested that breaking out the database behind the example web application he&rsquo;s discussing would be a natural next step, since the database has different scaling needs than the web server/web tier. This leads into a disucssion of Amazon&rsquo;s various DBaaS offerings. One offering in particular that Williams calls out is Amazon Aurora, a MySQL-compatible offering that has automatic storage scaling, read replicas, continuous incremental backups to S3, and 6-way replication across availability zones.</p>
<p>If you&rsquo;re trying to decide between SQL or NoSQL, Williams suggests that users start with SQL databases. SQL is a well-established and well-worn technology, there&rsquo;s lots of existing knowledge/tools/communities, and there are clear patterns to scalability.</p>
<p>After a brief discussion of SQL vs. NoSQL, Williams goes back to the example web application that he&rsquo;s using to discuss scalability. In breaking out the database from the web tier, he&rsquo;s electing to use a relational database service from AWS. The next step is to add an Elastic Load Balancer (ELB) and distributing the application across two availability zones&mdash;this means 2 web instances and 2 instances of RDS (one active and one standby). This sort of architecture gets you greater scale as well as greater redundancy and fault tolerance. Further, the recently-announced Application Load Balancer (ALB) can offer content-based routing, container-based applications, WebSockets, and HTTP/2 support.</p>
<p>By moving to multiple instances together with an ELB/ALB, Williams points out that you can now scale vertically (larger instances) as well as horizontally. This architecture will get you to tens of thousands of users, but how do we go even farther?</p>
<p>First, you can use Amazon Aurora and read replicas to scale the data tier by offloading reads from the database master. Next, CloudFront and S3 can help &ldquo;lighten the load&rdquo; by offloading static assets from the web tier. Offloading assets to CloudFront reduces the load on the web tier, which further allows the web tier to scale even further.</p>
<p>Next, Williams discusses the use of DynamoDB&mdash;a managed NoSQL database&mdash;to store/manage session state for the web tier. He also mentions Amazon ElastiCache, which is a managed Redis/Memcached service. Using Memcached with ElastiCache will limit you to a single AZ; you&rsquo;ll need to use Redis for multi-AZ support.</p>
<p>At this point, Williams brings the session back to Auto Scaling. Auto Scaling enables &ldquo;just-in-time provisioning,&rdquo; allowing users to scale infrastructure dynamically as load demands. He reminds users to be sure to create both scale-up policies <em>and</em> scale-down policies, so that Auto Scaling Groups will both add instances when load increases and decommission instances when load decreases.</p>
<p>The next slide seems somewhat unrelated to the scaling discussion; Williams spends a few minutes talking about Elastic Beanstalk, OpsWorks, and CloudFormation. He further goes on to discuss CodeDeploy, CodeCommit, and CodePipeline, with only minimal references back to the discussion of scaling an application. To be honest, it felt more like a commercial than anything else.</p>
<p>Moving back to the application scaling discussion, Williams turns his attention to the pain points that will emerge as the number of users exceeds half a million users. Logging, monitoring, and metrics will be important here, as you seek to squeeze as much performance and efficiency out of every component.</p>
<p>SOA&mdash;or, dare I say, microservices&mdash;is the next step on scaling the application. Fortunately for AWS, there&rsquo;s a whole realm of managed services that can take the place of portions of the application as you break it down into smaller components. Amazon SQS (Simple Queueing Service) is one example, as is Lambda (event-triggered Functions as a Service [FaaS]). Williams hammers hard on the &ldquo;loose coupling&rdquo; approach.</p>
<p>By now, Williams says the architecture should support over a million users. How do we go further? More regions, more availability zones, of course, but we&rsquo;ll also want to consider constraints on the data tier. Users may need to consider federation (splitting into multiple DBs based on function; enables better distribution of resources at the cost of re-working the application), sharding (offers no practical limit on scalability but is more complex and requires re-working the application), or moving to a NoSQL data tier.</p>
<p>As a means of quick review:</p>
<ul>
<li>Use multiple regions and multiple availability zones.</li>
<li>Use self-scaling services.</li>
<li>Start with SQL.</li>
<li>Cache data both inside and outside your infrastructure.</li>
<li>Use automation tools in your infrastructure.</li>
<li>Good monitoring/logging/metrics are important.</li>
<li>Use Auto Scaling when you&rsquo;re ready for it.</li>
</ul>
<p>What if you wanted to go past 10 million users? This will require deep analysis of your application and a lot of fine-tuning. Other services/products you may want to consider would include AWS EC2 Container Service (ECS) and greater use of Lambda.</p>
<p>At this point, Williams wraps up the session by offering some resources for additional reading and more information.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/aws">AWS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/reinvent2016">reInvent2016</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2016/11/25/installing-ansible-fedora-25/">Installing Ansible 2.2 on Fedora 25</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2016/11/29/hybrid-bridging-gap-to-cloud/">Liveblog: Hybrid Architectures, Bridging the Gap to the Cloud</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2016%2f11%2f29%2fscaling-first-10mil-users%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2016%2f11%2f29%2fscaling-first-10mil-users%2f&text=Liveblog%3a%20Scaling%20to%20Your%20First%2010%20Million%20Users" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2016%2f11%2f29%2fscaling-first-10mil-users%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2016/11/20/spousetivities-at-reinvent/">Spousetivities at AWS re:Invent</a> <span class="post-date-list">209 May 202020</span></li><li><a href="/2016/11/18/technology-short-take-73/">Technology Short Take #73</a> <span class="post-date-list">189 May 181818</span></li><li><a href="/2016/10/23/managing-aws-infrastructure-ansible/">Managing AWS Infrastructure with Ansible</a> <span class="post-date-list">239 May 232323</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
