<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Learning NVP, Part 3: NVP Manager - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Learning NVP, Part 3: NVP Manager - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Learning NVP, Part 3: NVP Manager - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2013/08/19/learning-nvp-part-3-nvp-manager/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Learning NVP, Part 3: NVP Manager</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 199 May 191919 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/tutorial">Tutorial</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;1167 words (estimated 6 minutes to read)</span>
  <p>Welcome to part 3 of the Learning NVP blog series. In <a href="/2013/05/21/learning-nvp-part-1-high-level-architecture/">part 1</a>, I provide an overview of the high-level architecture of NVP and discussed the role of the components in broad terms. In <a href="/2013/08/16/learning-nvp-part-2-nvp-controllers/">part 2</a>, I focused on the NVP controllers, showing you how to build/configure the NVP controllers and establish a controller cluster. In this part, I&rsquo;m going to turn my attention to NVP Manager, which will allow us to further configure NVP.</p>
<h2 id="reviewing-the-role-of-the-nvp-manager">Reviewing the Role of the NVP Manager</h2>
<p>NVP, as you may recall, was expressly designed to integrate with a variety of cloud management platforms (CMPs) via a set of northbound REST APIs. Those northbound REST APIs are actually implemented within the NVP controllers&mdash;not within NVP Manager. NVP Manager provides a web-based GUI that is used for certain NVP configuration tasks, such as:</p>
<ul>
<li>
<p>Adding hypervisors</p>
</li>
<li>
<p>Adding transport nodes (gateways and service nodes)</p>
</li>
<li>
<p>Configuring transport zones</p>
</li>
<li>
<p>Troubleshooting and information gathering</p>
</li>
</ul>
<p>NVP Manager is really more about the <em>configuration</em> of NVP and not the <em>operation</em> of NVP. To put it another way, you&rsquo;d use NVP Manager to manage the components in NVP, like gateways and hypervisors, but the actual use of NVP&mdash;creating logical networks, logical routers, etc.&mdash;would generally be done from within the CMP via REST API calls to the NVP controllers. That being said, I&rsquo;ll be using NVP Manager to do some of the things that would normally be handled by the CMP, simply because I don&rsquo;t have a CMP instance to use.</p>
<p>Now that you have a better idea of the role of NVP Manager, let&rsquo;s have a look at building and configuring NVP Manager.</p>
<h2 id="building-nvp-manager">Building NVP Manager</h2>
<p>Like the NVP controllers, NVP Manager is distributed as an ISO. In a production environment, you&rsquo;d use the ISO to burn optical disks that, in turn, are used to build NVP Manager. In production environments today, NVP Manager is installed on a bare metal server, but it is certainly possible to run NVP Manager in a VM (that&rsquo;s what I&rsquo;ll be doing; I&rsquo;ll actually be running it as a VM in an OpenStack cloud).</p>
<p>To build NVP Manager, just boot from the install media and allow the automated installation routine to complete. Like the controllers, NVP Manager runs on Ubuntu Server 12.04, and the installation routine automatically installs all the necessary components. After the reboot, NVP Manager will boot up to a login prompt. Once you login, you&rsquo;ll be dropped into the NVP CLI with an unconfigured NVP Manager instance.</p>
<h2 id="configuring-nvp-manager">Configuring NVP Manager</h2>
<p>Configuring NVP Manager, like configuring the NVP controllers, is actually pretty straightforward:</p>
<ol>
<li>
<p>Set a password for the admin user (optional, but highly recommended).</p>
</li>
<li>
<p>Set the hostname for NVP Manager (also optional, but highly recommended).</p>
</li>
<li>
<p>Assign an IP address to NVP Manager so it can communicate with the NVP controller cluster.</p>
</li>
<li>
<p>Add an NVP controller cluster to NVP Manager.</p>
</li>
</ol>
<p>Let&rsquo;s take a look at the commands needed to accomplish these steps.</p>
<p>First, setting the password for the admin user is done on NVP Manager just like it was on the NVP controllers:</p>
<pre><code>set user admin password
</code></pre>
<p>You&rsquo;ll be prompted to supply the new password, then retype it for confirmation. Next you can set the hostname, again using the same command as on the NVP controllers:</p>
<pre><code>set hostname &lt;hostname&gt;
</code></pre>
<p>As with the NVP controllers, the NVP Manager installation routine automatically installs <a href="http://openvswitch.org/">Open vSwitch (OVS)</a> and creates a bridge interface for each physical interface. In my virtual NVP Manager instance, I provided only a single interface (recognized as <code>eth0</code>), so the installation created a bridge interface named <code>breth0</code>. You can assign the IP address to this bridge interface using this command:</p>
<pre><code>set network interface breth0 ip config static 192.168.1.3 255.255.255.0
</code></pre>
<p>Naturally, you&rsquo;d want to substitute the correct IP address and subnet mask in that command. Now that network connectivity has been established (you can test it with <code>ping</code>), you can add DNS and NTP servers with these commands:</p>
<pre><code>add network dns-server &lt;DNS server IP address&gt;  
add network ntp-server &lt;NTP server IP address&gt;
</code></pre>
<p>Repeat the commands to add multiple DNS and/or NTP servers. Use <code>remove</code> instead of <code>add</code> in the above commands to remove a DNS or NTP server address (especially useful if you typed in the wrong address).</p>
<p>&lt;aside&gt;One quick note: if you switch the interface from DHCP to static configuration, the DNS settings still show up in the CLI&mdash;<em>but they don&rsquo;t work.</em> To fix it, use the commands <code>clear network dns-servers</code> and <code>clear network dns-search-domains</code>, then add those settings back in with the appropriate <code>add</code> command. This is a known issue with this release of NVP (3.1.1) and will be addressed in a future release.&lt;/aside&gt;</p>
<p>Once full network connectivity has been established, we can move past the CLI and start using NVP Manager&rsquo;s web interface. The first task we&rsquo;ll need to accomplish is adding the NVP controller cluster we built in <a href="/2013/08/16/learning-nvp-part-2-nvp-controllers/">part 2</a>. Here&rsquo;s how to add the NVP controller cluster to NVP Manager:</p>
<ol>
<li>
<p>Log into the NVP Manager web GUI.</p>
</li>
<li>
<p>Because there is no controller cluster, NVP Manager will automatically take you to the screen where you can add a cluster. Click Add Cluster.</p>
</li>
<li>
<p>In the Connect to NVP Controller Cluster dialog, supply an IP address of one of the controllers in the cluster along with the appropriate username and password.</p>
</li>
<li>
<p>Click Connect.</p>
</li>
<li>
<p>Supply a name for this controller cluster, along with an (optional) description and contact.</p>
</li>
<li>
<p>The &ldquo;Automatically Use New IPs&rdquo; box is checked by default; this tells NVP Manager to add all the IP addresses of this controller cluster as eligible to receive API calls from the NVP Manager. Recall from <a href="/2013/08/16/learning-nvp-part-2-nvp-controllers/">part 2</a> that it is possible to configure multiple interfaces on the controllers and designate certain interfaces to handle API calls, manage OVS devices, etc. If your configuration is such that only certain IP addresses should receive API calls, then uncheck this box.</p>
</li>
<li>
<p>The &ldquo;Export Logical Stats&rdquo; checkbox allows you to configure the controllers to make this NVP Manager the collector of logical port statistics. Checking this box is normally the recommended setting, and generally no changes to the default settings are needed. This allows you to query (either via the NVP Manager GUI or via the API) for logical port statistics.</p>
</li>
<li>
<p>The &ldquo;Make Active Cluster&rdquo; box should be checked.</p>
</li>
<li>
<p>Click Save.</p>
</li>
<li>
<p>Click Use This NVP Manager to configure the controllers to use the NVP Manager as their userlog server. Click Configure.</p>
</li>
</ol>
<p>This should complete the process of adding the controller cluster to NVP Manager.</p>
<p>Now that NVP Manager is connected to the controller cluster, you can click Dashboard in the header across the top of the NVP Manager web GUI and get a screen that looks something like this:</p>
<p><img src="/public/img/nvp-mgr-dashboard.png" alt="NVP Manager dashboard"></p>
<p>At this point, you now have a 3-node cluster of NVP controllers and an instance of NVP Manager connected to that cluster. The next step, which I&rsquo;ll tackle in the next part of this series, is adding some hypervisors.</p>
<p>Until then, I encourage everyone to post any questions, suggestions, or clarifications in the comments below. Courteous comments are always welcome.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/nicira">Nicira</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/nvp">NVP</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2013/08/16/learning-nvp-part-2-nvp-controllers/">Learning NVP, Part 2: NVP Controllers</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2013/08/21/state-of-devtest-infrastructure-survey/">State of Dev/Test Infrastructure Survey</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2013%2f08%2f19%2flearning-nvp-part-3-nvp-manager%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2013%2f08%2f19%2flearning-nvp-part-3-nvp-manager%2f&text=Learning%20NVP%2c%20Part%203%3a%20NVP%20Manager" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2013%2f08%2f19%2flearning-nvp-part-3-nvp-manager%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2013/08/16/learning-nvp-part-2-nvp-controllers/">Learning NVP, Part 2: NVP Controllers</a> <span class="post-date-list">169 May 161616</span></li><li><a href="/2013/05/21/learning-nvp-part-1-high-level-architecture/">Learning NVP, Part 1: High-Level Architecture</a> <span class="post-date-list">219 May 212121</span></li><li><a href="/2013/01/25/new-year-new-challenges-new-opportunities/">New Year, New Challenges, New Opportunities</a> <span class="post-date-list">259 May 252525</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
