<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Introduction to Nehalem Memory - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Introduction to Nehalem Memory - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Introduction to Nehalem Memory - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2009/05/11/introduction-to-nehalem-memory/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Introduction to Nehalem Memory</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 119 May 111111 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/education">Education</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;871 words (estimated 5 minutes to read)</span>
  <p><em>By Aaron Delp</em></p>
<p>I wanted to relay some information regarding choosing memory speeds and types for the new Intel Xeon 5500 (Nehalem family) processors. As stated in my previous <a href="/2009/04/07/introduction-to-nehalem-cpus/">article on the Nehalem CPUs</a>, there are some decisions that need to be made when choosing the memory and processor combinations. Lets start off with what the memory architecture looks like.</p>
<ul>
<li>
<p>The current Xeon 5500 family is a two-socket configuration.</p>
</li>
<li>
<p>Memory will run at 1333 MHz, 1066 MHz, and 800 MHz.</p>
</li>
<li>
<p>Memory is currently produced in single, dual, and quad rank configurations. Dual rank is faster than single rank, quad rank is currently limited to 1066 MHz speed.</p>
</li>
<li>
<p>Each CPU socket has 3 memory channels for a total of 6 channels per server.</p>
</li>
<li>
<p>Each <strong>channel</strong> can accept up to 3 DIMMS. This is why the servers currently are made with either 12 sockets (2 DIMMS per channel x 3 channels per processor x 2 processor sockets) or 18 sockets (3 DIMMS per channel x 3 Channels per processor x 2 processor sockets).</p>
</li>
<li>
<p>Some servers come in a 16 DIMM arrangement. Please see <a href="ftp://ftp.software.ibm.com/common/ssi/sa/wh/n/xsw03025usen/XSW03025USEN.PDF">this IBM Paper</a> for more information.</p>
</li>
<li>
<p>The maximum memory speed is limited by processor. For example, the X5570 has a max memory speed of 1333 MHz, the E5540 has a max memory speed of 1066 MHz, etc.</p>
</li>
<li>
<p>As more memory is added to a <strong>channel</strong>, the memory will slow down.</p>
</li>
<li>
<p>Better performance is achieved when the memory is balanced (the total amount of memory across channels is the same).</p>
</li>
</ul>
<p>Take a look at the <a href="http://h18000.www1.hp.com/products/quickspecs/13238_na/13238_na.HTML#Memory">Hp Quick Specs for the BL460 G6 server in the Memory section</a>. I found this to be a great source.</p>
<p>So, what does all of that mean? It means that for best performance you should install the memory using the following guidelines:</p>
<ul>
<li>
<p>Ideally, install DIMMs in sets of 6, 1 per channel (populate both sockets with CPUs!). Use DIMMs that are dual rank and have the fastest speed you can purchase that the processor supports.</p>
</li>
<li>
<p>Populate the first slot in all channels first, then populate the 2nd slots in all channels, etc. Dont put all three DIMMs in one channel and leave other channels empty.</p>
</li>
<li>
<p>Balance the amount of memory in each channel whenever possible (3 x 4GB on two channels and 1 x 4GB 1 X 8GB on the last channel).</p>
</li>
<li>
<p>If at all possible, try to keep the system away from the 800MHz memory speed.</p>
</li>
</ul>
<p>Here is link to an <em>awesome</em> <a href="ftp://ftp.software.ibm.com/common/ssi/sa/wh/n/xsw03025usen/XSW03025USEN.PDF">IBM white paper</a> explaining everything.</p>
<p>Here&rsquo;s an example 12 DIMM slot Nehalem configuration:</p>
<p>| CPU (Speed)     | Max Mem   | Bank 1    | Bank 2    |</p>
<table>
<thead>
<tr>
<th></th>
<th>Speed</th>
<th>Populated</th>
<th>Populated</th>
</tr>
</thead>
<tbody>
<tr>
<td>X5570 (2.93GHz)</td>
<td>1333 MHz</td>
<td>1333 MHz</td>
<td>1066 MHz*</td>
</tr>
<tr>
<td>X5560 (2.80GHz)</td>
<td>1333 MHz</td>
<td>1333 MHz</td>
<td>1066 MHz*</td>
</tr>
<tr>
<td>X5550 (2.66GHz)</td>
<td>1333 MHz</td>
<td>1333 MHz</td>
<td>1066 MHz*</td>
</tr>
<tr>
<td>E5540 (2.53GHz)</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
</tr>
<tr>
<td>E5530 (2.40GHz)</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
</tr>
<tr>
<td>E5520 (2.26GHz)</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
</tr>
<tr>
<td>E5506 (2.13GHz)</td>
<td>800 MHz</td>
<td>800 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5504 (2.00GHz)</td>
<td>800 MHz</td>
<td>800 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5502 (1.66GHz)</td>
<td>800 MHz</td>
<td>800 MHz</td>
<td>800 MHz</td>
</tr>
</tbody>
</table>
<p>Here&rsquo;s an example 18 DIMM slot Nehalem configuration:</p>
<p>| CPU (Speed)     | Max Mem   | Bank 1    | Bank 2    |</p>
<table>
<thead>
<tr>
<th></th>
<th>Speed</th>
<th>Populated</th>
<th>Populated</th>
</tr>
</thead>
<tbody>
<tr>
<td>X5570 (2.93GHz)</td>
<td>1333 MHz</td>
<td>1066 MHz*</td>
<td>800 MHz</td>
</tr>
<tr>
<td>X5560 (2.80GHz)</td>
<td>1333 MHz</td>
<td>1066 MHz*</td>
<td>800 MHz</td>
</tr>
<tr>
<td>X5550 (2.66GHz)</td>
<td>1333 MHz</td>
<td>1066 MHz*</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5540 (2.53GHz)</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5530 (2.40GHz)</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5520 (2.26GHz)</td>
<td>1066 MHz</td>
<td>1066 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5506 (2.13GHz)</td>
<td>800 MHz</td>
<td>800 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5504 (2.00GHz)</td>
<td>800 MHz</td>
<td>800 MHz</td>
<td>800 MHz</td>
</tr>
<tr>
<td>E5502 (1.66GHz)</td>
<td>800 MHz</td>
<td>800 MHz</td>
<td>800 MHz</td>
</tr>
</tbody>
</table>
<p>* According to the HP Quick Spec for the BL460 G6, they are able to keep the speed at 1333 MHz with 2 DIMMS. A BIOS update is required to achieve this. This is HP specific.</p>
<p><strong>Common Questions:</strong></p>
<p><strong>Q:</strong> What kind of performance decrease will I see by lowering the clock speed of my memory? For example using 6x2GB DIMMs (running at 1333 MHz) vs 12 x 1 GB DIMMs (running at 1066 MHz) to save a little money.</p>
<p><strong>A:</strong> According to the IBM white paper listed above, we have two main areas of performance to worry about, latency and throughput. The latency difference between 1333 MHz and 800 MHz is about 10%. Memory throughput is another story though. The different between 1333 MHz and 1066 MHz is about 9%. The difference from 1066 MHz to 800 MHz is 28%!</p>
<p><strong>Q:</strong> What kind of performance increase will I see in a balanced (same amount of memory per channel) system?</p>
<p><strong>A:</strong> Again, according to the IBM paper, you will see a performance increase if the system is balanced. An exact number isnt given.</p>
<p><strong>Q:</strong> Which is fastest? Single, dual, or quad rank DIMMS?</p>
<p><strong>A:</strong> According to the IBM White Paper, dual rank outperforms single rank by 7% in Specjbb2005. Quad rank DIMMs decrease the clock speed to 1066 MHz so they are not faster at this time.</p>
<p><strong>Q:</strong> What if I only populate one processor?</p>
<p><strong>A:</strong> You want to populate both sockets if performance is a concern. Adding the second processor not only makes the second set of DIMM sockets available, it also doubles the memory bandwidth.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/hardware">Hardware</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/nehalem">Nehalem</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/intel">Intel</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/guestpost">GuestPost</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2009/05/07/implementing-ibm-bladecenter-open-fabric-manager/">Implementing IBM BladeCenter Open Fabric Manager</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2009/05/11/pre-order-mastering-vmware-vsphere-4/">Pre-Order Mastering VMware vSphere 4</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2009%2f05%2f11%2fintroduction-to-nehalem-memory%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2009%2f05%2f11%2fintroduction-to-nehalem-memory%2f&text=Introduction%20to%20Nehalem%20Memory" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2009%2f05%2f11%2fintroduction-to-nehalem-memory%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2009/04/07/introduction-to-nehalem-cpus/">Introduction to &#34;Nehalem&#34; CPUs</a> <span class="post-date-list">79 May 7077</span></li><li><a href="/2009/05/07/implementing-ibm-bladecenter-open-fabric-manager/">Implementing IBM BladeCenter Open Fabric Manager</a> <span class="post-date-list">79 May 7077</span></li><li><a href="/2009/02/16/blades-and-virtualization-arent-mutually-exclusive-part-four-hp-traditional-expansion-options/">Blades and Virtualization Aren&#39;t Mutually Exclusive: Part Four, HP Traditional Expansion Options</a> <span class="post-date-list">169 May 161616</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
