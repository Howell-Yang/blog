<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Strange Error with Firefly Media Server, iTunes, and Avahi - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Strange Error with Firefly Media Server, iTunes, and Avahi - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Strange Error with Firefly Media Server, iTunes, and Avahi - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2009/05/23/strange-error-with-firefly-media-server-itunes-and-avahi/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Strange Error with Firefly Media Server, iTunes, and Avahi</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 239 May 232323 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/explanation">Explanation</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;512 words (estimated 3 minutes to read)</span>
  <p>Over the 2008-2009 holiday season, I rebuilt my home network. I included the notes and information from my home network rebuild in <a href="/2009/01/02/ubuntu-and-mac-os-x-integration/">an article that described the Mac OS X-Ubuntu integration</a> resulting from the rebuild. Since that time, I&rsquo;ve added a larger hard drive to the home server to make more room for Time Machine backups, movies, music, and other files. Things seemed to be working very well. Until the other day&hellip;</p>
<p>My wife made an offhand comment that she couldn&rsquo;t access the shared music library from her laptop. I tested the connection and, sure enough, every time I clicked the shared library icon it simply disappeared. No error, no warning, no entries in any log files&hellip;it just disappeared. I searched the Windows event logs, and I searched the log files on the Ubuntu server downstairs. Neither computer had any entries whatsoever that provided any insight as to why this one computer would not connect to the shared music library.</p>
<p>Being the geeky troubleshooter that I am, I attempted to replicate the problem on some of the other computers on the network. My MacBook Pro worked fine. Three other Windows laptops on the network, running the same version of Windows (Windows XP Professional) and the same Service Pack revision, also worked fine. The problem seemed to be isolated to her computer. Perhaps it was only when she was on the wireless network&hellip;nope, the same problem regardless of the network connection.</p>
<p>I upgraded iTunes to the latest version. That didn&rsquo;t work. I disabled the Windows Firewall on her computer. That didn&rsquo;t work. I made sure that no traffic was being blocked by the firewall on the Ubuntu server; no traffic was being blocked. In other words, that didn&rsquo;t work. I was about to give up and just write it off as one of those strange aberrations that couldn&rsquo;t be resolved and chalk it up to Windows.</p>
<p>Then I stumbled onto <a href="http://www.vleeuwen.net/2009/05/setup-firefly-to-serve-itunes">this site</a>. I&rsquo;d already created a daapd.service file for Avahi to use previously, but this site described some additional entries in the daapd.service file that I didn&rsquo;t have. I made some edits, based on the information on the site, and here&rsquo;s the daapd.service file I had for Avahi:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; standalone=&#39;no&#39;?&gt;</span><span style="color:#75715e">&lt;!--*-nxml-*--&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE service-group SYSTEM &#34;avahi-service.dtd&#34;&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;service-group&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;name</span> <span style="color:#a6e22e">replace-wildcards=</span><span style="color:#e6db74">&#34;yes&#34;</span><span style="color:#f92672">&gt;</span>Home Media Server<span style="color:#f92672">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;service&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;type&gt;</span>_daap._tcp<span style="color:#f92672">&lt;/type&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;port&gt;</span>3689<span style="color:#f92672">&lt;/port&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;txt-record&gt;</span>txtvers=1<span style="color:#f92672">&lt;/txt-record&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;txt-record&gt;</span>iTSh Version=131073<span style="color:#f92672">&lt;/txt-record&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;txt-record&gt;</span>Version=196610<span style="color:#f92672">&lt;/txt-record&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/service&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/service-group&gt;</span>
</span></span></code></pre></div><p>After changing the daapd.service file to the version listed above, I restarted Avahi. Upon the shared media server re-appearing in iTunes, I clicked on it and&hellip;drum roll please&hellip;it worked! The previous version I had been using did not have the <code>txt-record</code> entries, and I really have no idea why adding the <code>txt-record</code> entries suddenly made my wife&rsquo;s iTunes connect properly. I suppose it doesn&rsquo;t matter why it works, it just matters that I <strong>FIXED IT!</strong> (ePlus engineers who attended our NSM this year will get this joke.)</p>
<p>Still, in the event you&rsquo;re running into the same issue&mdash;a Windows installation of iTunes that fails to connect to a shared music library running on Firefly Media Server&mdash;then perhaps updating your Avahi configuration will correct the problem.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/linux">Linux</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/macos">macOS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/music">Music</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/oss">OSS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/ubuntu">Ubuntu</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/windows">Windows</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2009/05/21/vsphere-4-available-for-download/">vSphere 4 Available for Download</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2009/05/28/vmware-this-is-wrong/">VMware, This is Wrong</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2009%2f05%2f23%2fstrange-error-with-firefly-media-server-itunes-and-avahi%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2009%2f05%2f23%2fstrange-error-with-firefly-media-server-itunes-and-avahi%2f&text=Strange%20Error%20with%20Firefly%20Media%20Server%2c%20iTunes%2c%20and%20Avahi" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2009%2f05%2f23%2fstrange-error-with-firefly-media-server-itunes-and-avahi%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2009/01/08/my-ubuntu-mac-article-is-popular-i-guess/">My Ubuntu-Mac Article is Popular, I Guess</a> <span class="post-date-list">89 May 8088</span></li><li><a href="/2009/01/02/ubuntu-and-mac-os-x-integration/">Ubuntu and Mac OS X Integration</a> <span class="post-date-list">29 May 2022</span></li><li><a href="/2008/12/26/openvpn-and-mt-daapd/">OpenVPN and mt-daapd</a> <span class="post-date-list">269 May 262626</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
