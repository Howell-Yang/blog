<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Cisco UCS Virtualization-Optimized CNAs - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Cisco UCS Virtualization-Optimized CNAs - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Cisco UCS Virtualization-Optimized CNAs - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2009/03/18/cisco-ucs-virtualization-optimized-cnas/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Cisco UCS Virtualization-Optimized CNAs</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 189 May 181818 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/information">Information</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;700 words (estimated 4 minutes to read)</span>
  <p>There&rsquo;s some great information being shared in the comments to my <a href="/2009/03/16/more-on-cisco-ucs/">&ldquo;More on Cisco UCS&rdquo;</a> post. So good, in fact, that I thought it entirely and completely appropriate to bring that information into the limelight with a full-blown post.</p>
<p>If you look back at the diagram that&rsquo;s included in that UCS post, toward the bottom you&rsquo;ll see a very small blurb about some Cisco UCS Network Adapters that are optimized for efficiency and performance, compatibility, and virtualization. In a nutshell, the idea here is that there are three different CNA families targeted at different markets: high-performance Ethernet, compatibility with existing driver stacks, and virtualization. Users will choose the CNA that best suits their needs. For the purposes of this post, I&rsquo;d like to discuss the virtualization-optimized CNA.</p>
<p>The idea here is that the virtualization-optimized CNA (what is being referred to as &ldquo;Palo&rdquo;) will leverage a number of different technologies in virtualized environments:</p>
<ul>
<li>
<p>It will utilize SR-IOV (Single Root I/O Virtualization), a PCI SIG standard for allowing a physical network adapter to present multiple virtual adapters to upper-level software, in this case the hypervisor. This eliminates the need for the hypervisor to manage the physical network adapter and allows VMs to attach directly to one of the SR-IOV virtual adapters (or, as Brad Hedlund put it in a comment to <a href="/2009/03/16/more-on-cisco-ucs/">my original article</a>, an &ldquo;SR-IOV slice of the adapter&rdquo;).</p>
</li>
<li>
<p>It will utilize Intel I/O Acceleration Technology (Intel I/OAT) to minimize bottlenecks in the hardware and allow the server to better cope with massive dataflows like those generated by 10GbE adapters.</p>
</li>
<li>
<p>It will use Intel Virtual Machine Device Queues (VMDq) to improve traffic management within the server and decrease the processing burden on the VMM, i.e., the hypervisor.</p>
</li>
</ul>
<p>Together, these technologies can be referred to as <a href="http://www.intel.com/network/connectivity/solutions/virtualization.htm">Intel VT-c</a>. The virtualization-optimized drivers will also take advantage of <a href="http://software.intel.com/en-us/articles/intel-virtualization-technology-for-directed-io-vt-d-enhancing-intel-platforms-for-efficient-virtualization-of-io-devices/">Intel VT-d</a> to provide hardware-assisted DMA remapping and better protection and performance of direct-assigned devices.</p>
<p>&ldquo;OK,&rdquo; you say. &ldquo;But where is all this leading?&rdquo; Good question! Let&rsquo;s bring it all together.</p>
<p>Today, in the VMware space, virtual machines are connected to a vSwitch because connecting them directly to a physical adapter just isn&rsquo;t practical. Yes, there is VMDirectPath, but for VMDirectPath to really work it needs more robust hardware support. Otherwise, you lose useful features like VMotion. (Refer back to my VMworld 2008 session notes from <a href="/2008/09/18/ta2644-networking-io-virtualization/">TA2644</a>.) So, we have to manage physical switches and virtual switches&mdash;that&rsquo;s two layers of management and two layers of switching. Along comes the Cisco Nexus 1000V. The 1000V helps to centralize management but we still have two layers of switching.</p>
<p>That&rsquo;s where the &ldquo;Palo&rdquo; adapter comes in. Using VMDirectPath &ldquo;Gen 2&rdquo; (again, refer to my TA2644 notes) and the various hardware technologies I listed and described above, we now gain the ability to attach VMs directly to the network adapter and <em>eliminate the virtual switching layer entirely.</em> Now we&rsquo;ve both centralized the management and eliminated an entire layer of switching. And no matter how optimized the code may be, the fact that the hypervisor doesn&rsquo;t have to handle packets means it has more cycles to do other things. In other words, there&rsquo;s less hypervisor overhead. I think we can all agree that&rsquo;s a good thing.</p>
<p>&lt;aside&gt;I&rsquo;ve clashed with a couple of different people thus far because of differences on perspective with regard to UCS. OK, specifically, it&rsquo;s been regarding people who insist that UCS isn&rsquo;t a blade server. OK, UCS as an overall <em>system</em> is not a blade server, but the B-Series blades are a significant part of this overall system&mdash;so to say that Cisco&rsquo;s isn&rsquo;t building blade servers really isn&rsquo;t accurate. They <strong>are</strong> building blade servers, but these are blade servers with an as-yet-unseen level of integration with other technologies. If there is one area in which UCS stands apart from any other blade server-related solution on the market, it would be this level of integration, especially the integration with virtualization technology.&lt;/aside&gt;</p>
<p>Chad Sakac of EMC touches on this very lightly in his <a href="http://virtualgeek.typepad.com/virtual_geek/2009/03/interesting-dialog-on-the-cisco-ucs-stuff-and-a-bit-of-detail.html">latest post</a>. Being who I am, though, I much prefer digging a bit deeper to better understand exactly what&rsquo;s going on.</p>
<p>UCS experts, feel free to correct me or clarify my statements in the comments. Thanks!</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/cisco">Cisco</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmware">VMware</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vsphere">vSphere</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/ucs">UCS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/hardware">Hardware</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2009/03/18/site-maintenance/">Site Maintenance</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2009/03/19/hyper9-goes-ga/">Hyper9 Goes GA</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2009%2f03%2f18%2fcisco-ucs-virtualization-optimized-cnas%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2009%2f03%2f18%2fcisco-ucs-virtualization-optimized-cnas%2f&text=Cisco%20UCS%20Virtualization-Optimized%20CNAs" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2009%2f03%2f18%2fcisco-ucs-virtualization-optimized-cnas%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2009/03/16/more-on-cisco-ucs/">More on Cisco UCS</a> <span class="post-date-list">169 May 161616</span></li><li><a href="/2009/03/13/next-gen-stuff-enabling-cdp-in-esxesxi/">Next-Gen Stuff: Enabling CDP in ESX/ESXi</a> <span class="post-date-list">139 May 131313</span></li><li><a href="/2008/03/11/identifying-esx-server-nics-in-blades/">Identifying ESX Server NICs in Blades</a> <span class="post-date-list">119 May 111111</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
