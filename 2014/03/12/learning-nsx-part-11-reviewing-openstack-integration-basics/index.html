<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Learning NSX, Part 11: Reviewing OpenStack Integration Basics - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Learning NSX, Part 11: Reviewing OpenStack Integration Basics - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Learning NSX, Part 11: Reviewing OpenStack Integration Basics - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2014/03/12/learning-nsx-part-11-reviewing-openstack-integration-basics/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Learning NSX, Part 11: Reviewing OpenStack Integration Basics</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 129 May 121212 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/explanation">Explanation</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;872 words (estimated 5 minutes to read)</span>
  <p>Welcome to part 11 of the Learning NSX blog series, in which I provide a high-level overview of the basics on integrating VMware NSX into an <a href="http://openstack.org/">OpenStack</a> deployment using OpenStack Neutron. In case you&rsquo;re just now catching up on this blog series, I encourage you to visit <a href="/learning-nvp-nsx/">my Learning NVP/NSX page</a>, which has a brief summary of all the posts in the series.</p>
<p>Now that I&rsquo;ve shown you how to build all the different components of NSX (<a href="/2013/08/16/learning-nvp-part-2-nvp-controllers/">NSX controllers</a>, <a href="/2013/08/19/learning-nvp-part-3-nvp-manager/">NSX Manager</a>, <a href="/2013/10/28/learning-nvp-part-6-adding-an-nvp-gateway/">gateway appliances</a>, and <a href="/2014/02/27/learning-nsx-part-10-adding-a-service-node/">service nodes</a>), it&rsquo;s time to add integration into a cloud management platform. VMware NSX was designed to be integrated into a cloud management platform. Because VMware NSX offers a full-featured RESTful API, you could&mdash;in theory&mdash;integrate NSX into just about <em>any</em> cloud management platform. However, for the purposes of this series, I&rsquo;ll limit the discussion to focus on how one would integrate VMware NSX with OpenStack via the OpenStack Neutron (formerly &ldquo;Quantum&rdquo;) project, which provides virtual networking functionality for OpenStack-based clouds.</p>
<p>The challenge in discussing OpenStack-NSX integration is that one must first understand the basics of OpenStack Neutron before looking at how to integrate VMware NSX into Neutron. Therefore, the primary goal of this post in the series is to provide an overview of Neutron, and then discuss how NSX integrates into Neutron. The next post in the series will provide more in-depth technical details on exactly how the integration is configured.</p>
<p>Let&rsquo;s start with a generic overview of OpenStack Neutron and its components.</p>
<h2 id="examining-openstack-neutron-components">Examining OpenStack Neutron Components</h2>
<p>OpenStack Neutron itself has a number of different components:</p>
<ul>
<li>
<p>The Neutron server, which supplies the Neutron API and is typically&mdash;but not required to be&mdash;deployed co-resident on an OpenStack &ldquo;controller node&rdquo; (not to be confused with an NSX controller).</p>
</li>
<li>
<p>The Neutron DHCP agent, which provides DHCP services for the various logical networks created in Neutron (at least, whenever DHCP is enabled for a logical network).</p>
</li>
<li>
<p>The Neutron L3 agent, which provides L3 (routed) connectivity for Neutron logical networks. This includes both L3 between logical networks as well as L3 in and out of logical networks.</p>
</li>
<li>
<p>The Neutron metadata agent, which is responsible for providing connectivity between instances and the Nova metadata service (for customizing instances appropriately).</p>
</li>
<li>
<p>Finally, for many Open vSwitch (OVS)-based installations, there is the Neutron OVS agent, which provides a way to program OVS to do what Neutron needs it to do.</p>
</li>
</ul>
<p>The Neutron DHCP, L3, and metadata agents are typically&mdash;but not required to be&mdash;installed on a so-called &ldquo;network node.&rdquo; This network node provides DHCP services to the various logical networks (often using <a href="/2013/09/04/introducing-linux-network-namespaces/">Linux network namespaces</a>, if the Linux distribution supports them), routed connectivity in and out of logical networks (once again with network namespaces, Linux bridges, and iptables rules), and metadata service connectivity.</p>
<p>From a traffic flow perspective, traffic from one subnet in a logical network to another subnet in a logical network must hairpin through the network node (where the L3 agent resides). Traffic headed out of a logical network must flow through the network node, where iptables rules will perform the necessary network address translation (NAT) functions associated with the use of floating IPs in an OpenStack environment. And, as I&rsquo;ve already mentioned, the network node provides DHCP services to all the logical networks as well.</p>
<p>This is, by necessity, a very high-level overview of OpenStack Neutron and the core components. Let&rsquo;s now take a look at how these components are affected when you choose to use VMware NSX with OpenStack Neutron.</p>
<h2 id="reviewing-openstack-neutron-with-nsx">Reviewing OpenStack Neutron With NSX</h2>
<p>When you&rsquo;re using VMware NSX as the mechanism behind OpenStack Neutron, some of Neutron&rsquo;s functionality is provided by NSX itself:</p>
<ul>
<li>
<p>You no longer need the L3 agent. L3 connectivity is provided by the NSX gateway appliances and logical gateway services (refer to <a href="/2013/10/28/learning-nvp-part-6-adding-an-nvp-gateway/">part 6</a> and <a href="/2014/02/26/learning-nsx-part-9-adding-a-gateway-service/">part 9</a> of the series, respectively).</p>
</li>
<li>
<p>You won&rsquo;t need the OVS agent on the hypervisors, because the NSX controllers are responsible for configuring/programming OVS on transport nodes. More details on this interaction is provided in <a href="/2013/08/22/learning-nvp-part-4-adding-hypervisors-to-nvp/">part 4</a> of the series. (<em>Transport nodes</em> is a generic term referring to nodes that participate in the data plane, such as hypervisors, gateways, and service nodes.)</p>
</li>
<li>
<p>You will still need the Neutron server, the DHCP agent, and the metadata agent.</p>
</li>
</ul>
<p>Therefore, if you choose to deploy the OpenStack Neutron components in a &ldquo;typical&rdquo; fashion, you&rsquo;d have a setup something like this:</p>
<ul>
<li>
<p>An OpenStack &ldquo;controller node&rdquo; would host the Neutron server, which provides the API with which other parts of OpenStack will interact. This node generally does not have OVS installed, but would have the NSX plugin for Neutron installed. This plugin implements the integration between OpenStack and NSX, and will communicate with NSX via the NSX northbound RESTful API.</p>
</li>
<li>
<p>An OpenStack &ldquo;network node&rdquo; would host the Neutron DHCP agent and the Neutron metadata agent. This node would have OVS installed, and would be registered into NSX as a hypervisor (even though it is not a hypervisor and will not host any VMs).</p>
</li>
</ul>
<p>At this point, you should have a pretty good understanding of how, at a high level, NSX integrates with and affects OpenStack Neutron. In the next post in the series, I&rsquo;ll provide more details on exactly how to configure the integration between VMware NSX and OpenStack Neutron.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/neutron">Neutron</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/nsx">NSX</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/nvp">NVP</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/openstack">OpenStack</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmware">VMware</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2014/03/11/a-quick-introduction-to-docker/">A Quick Introduction to Docker</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2014/03/17/modifying-qcow-images-with-guestfish/">Modifying QCOW Images with Guestfish</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2014%2f03%2f12%2flearning-nsx-part-11-reviewing-openstack-integration-basics%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2014%2f03%2f12%2flearning-nsx-part-11-reviewing-openstack-integration-basics%2f&text=Learning%20NSX%2c%20Part%2011%3a%20Reviewing%20OpenStack%20Integration%20Basics" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2014%2f03%2f12%2flearning-nsx-part-11-reviewing-openstack-integration-basics%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2014/02/27/learning-nsx-part-10-adding-a-service-node/">Learning NSX, Part 10: Adding a Service Node</a> <span class="post-date-list">279 May 272727</span></li><li><a href="/2014/03/07/technology-short-take-39/">Technology Short Take #39</a> <span class="post-date-list">79 May 7077</span></li><li><a href="/2014/02/26/learning-nsx-part-9-adding-a-gateway-service/">Learning NSX, Part 9: Adding a Gateway Service</a> <span class="post-date-list">269 May 262626</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
