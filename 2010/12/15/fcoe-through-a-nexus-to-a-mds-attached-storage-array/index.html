<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>FCoE through a Nexus to a MDS-Attached Storage Array - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="FCoE through a Nexus to a MDS-Attached Storage Array - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="FCoE through a Nexus to a MDS-Attached Storage Array - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2010/12/15/fcoe-through-a-nexus-to-a-mds-attached-storage-array/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">FCoE through a Nexus to a MDS-Attached Storage Array</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 159 May 151515 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/tutorial">Tutorial</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;508 words (estimated 3 minutes to read)</span>
  <p>In this post, I want to pull together all the steps necessary to take a Converged Network Adapter (CNA)-equipped server and connect it, using FCoE, to a Fibre Channel-attached storage array. There isn&rsquo;t a whole lot of &ldquo;net new&rdquo; information in this post, but rather I&rsquo;m summarizing previous posts, organizing the information, and showing how these steps relate to each other. I hope that this helps someone understand the &ldquo;big picture&rdquo; of how FCoE and Fibre Channel relate to each other and how they interoperate (which, quite frankly, is one of the key factors for the adoption of FCoE).</p>
<p>The steps involved come from an environment with the following components:</p>
<ul>
<li>
<p>A Dell PowerEdge R610 server running VMware ESXi and containing an Emulex CNA</p>
</li>
<li>
<p>A Cisco Nexus 5010 switch running NX-OS 4.2(1)N1(1).</p>
</li>
<li>
<p>A Cisco MDS 9134 Fibre Channel switch running NX-OS 5.0(1a).</p>
</li>
<li>
<p>An older EMC CX3-based array with Fibre Channel ports in the storage processors.</p>
</li>
</ul>
<p>We&rsquo;ll start at the edge (the host) and work our way to the storage. All these steps assume that you&rsquo;ve already taken care of the physical cabling.</p>
<ol>
<li>
<p>Depending upon how old the software is on your hosts, you might need to install updated drivers for your CNA, as I described <a href="/2009/08/13/getting-qlogic-gen2-cnas-working-with-esx-4/">here</a>. If you&rsquo;re using newer versions of software, the drivers will most likely work just fine out of the box.</p>
</li>
<li>
<p>The closest piece to the edge is the FCoE configuration on the Nexus 5010 switch. Here&rsquo;s <a href="/2009/10/25/setting-up-fcoe-on-a-nexus-5000/">how to setup FCoE on a Nexus 5000</a>. Be sure that you map VLANs correctly to VSANs; for every VSAN that needs to be accessible from the FCoE-attached hosts, you&rsquo;ll need a matching VLAN. Further, as pointed out <a href="/2009/11/03/fcoe-and-vlan-trunking-on-nexus-5000/">here</a>, the VLAN and VLAN trunking configuration is critical to making FCoE work properly anyway.</p>
</li>
<li>
<p>The next step is connecting the Nexus 5010 to the MDS 9134 Fibre Channel switch. Read this to see <a href="/2010/06/28/how-to-configure-npv-on-a-nexus-5000/">how to configure NPV on a Nexus 5000</a> if you are going to use NPV mode (and read this for more information on <a href="/2009/11/27/understanding-npiv-and-npv/">NPV and NPIV</a>). Using NPV or not, you&rsquo;ll also need to setup connections between the Nexus and the MDS; here&rsquo;s <a href="/2010/11/30/san-port-channels-from-nexus-5010-to-mds-9134/">how to setup SAN port channels between a Cisco Nexus and a Cisco MDS</a>.</p>
</li>
<li>
<p>Once the Nexus and the MDS are connected, then you&rsquo;ll need to perform the necessary zoning so that the hosts can see the storage. Before starting the zoning, you might find it helpful to <a href="/2010/12/08/using-device-aliases-on-a-cisco-mds/">set up device aliases</a>. After your device aliases are defined, you can create the zones and zonesets. This post has information on <a href="/2009/08/24/new-users-guide-to-configuring-cisco-mds-zones-via-cli/">how to create zones via CLI</a>; this post has information on <a href="/2009/10/20/new-users-guide-to-managing-cisco-mds-zones-via-cli/">how to manage zones via CLI</a>.</p>
</li>
</ol>
<p>At this point&mdash;if everything is working correctly&mdash;then you are done and you should be ready to present storage to the end hosts.</p>
<p>I hope this helps put the steps involved (all of which I&rsquo;ve already written about) in the right order and in the right relationship to each other. If there are any questions, clarifications, or suggestions, please feel free to speak up in the comments.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/cisco">Cisco</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/emc">EMC</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/fcoe">FCoE</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/fibrechannel">FibreChannel</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/interoperability">Interoperability</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/san">SAN</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/storage">Storage</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2010/12/14/allegations-regarding-fbi-involvement-with-openbsd/">Allegations Regarding FBI Involvement with OpenBSD</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2010/12/16/some-emc-product-updates/">Some EMC Product Updates</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2010%2f12%2f15%2ffcoe-through-a-nexus-to-a-mds-attached-storage-array%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2010%2f12%2f15%2ffcoe-through-a-nexus-to-a-mds-attached-storage-array%2f&text=FCoE%20through%20a%20Nexus%20to%20a%20MDS-Attached%20Storage%20Array" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2010%2f12%2f15%2ffcoe-through-a-nexus-to-a-mds-attached-storage-array%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2010/11/30/san-port-channels-from-nexus-5010-to-mds-9134/">SAN Port Channels from Nexus 5010 to MDS 9134</a> <span class="post-date-list">309 May 303030</span></li><li><a href="/2010/11/10/technology-short-take-6/">Technology Short Take #6</a> <span class="post-date-list">109 May 101010</span></li><li><a href="/2010/09/28/technology-short-take-4/">Technology Short Take #4</a> <span class="post-date-list">289 May 282828</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
