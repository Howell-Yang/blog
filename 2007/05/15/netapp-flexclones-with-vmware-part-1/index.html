<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>NetApp FlexClones with VMware, Part 1 - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="NetApp FlexClones with VMware, Part 1 - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="NetApp FlexClones with VMware, Part 1 - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2007/05/15/netapp-flexclones-with-vmware-part-1/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">NetApp FlexClones with VMware, Part 1</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 159 May 151515 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/explanation">Explanation</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;628 words (estimated 3 minutes to read)</span>
  <p>The ability to quickly and easily create new virtual servers in <a href="http://www.vmware.com/products/vi/vc/">VMware VirtualCenter</a> (using templates and cloning) is a key feature that benefits a lot of VMware customers. A new server running <a href="http://www.microsoft.com/windowsserver/default.mspx">Windows Server 2003 R2</a> in less than 10 minutes? Who wouldn&rsquo;t like that functionality? (Some other day, perhaps we&rsquo;ll discuss that very question.)</p>
<p>VMware&rsquo;s cloning functionality is great in that it is completely storage-agnostic; it works the same on an HP EVA, a NetApp storage system, an EMC Clariion, or a homebrew iSCSI target. At the same time, VMware&rsquo;s cloning functionality is not so great in that it is completely storage-agnostic. It doesn&rsquo;t take advantage of any of the hardware-specific functionality. In this article, I&rsquo;d like for us to look at one particular vendor Network Appliance and how using some vendor- and hardware-specific functionality (namely <a href="http://www.netapp.com/products/enterprise-software/storage-system-software/provisioning-volume-management/flexclone.html">FlexClones</a>) can provide some benefits.</p>
<p>Note that we won&rsquo;t discuss the mechanics of how we actually use FlexClones to provision VMs; that detailed technical information can be found in <a href="/2007/05/11/how-to-provision-vms-using-netapp-flexclones/">this earlier article</a>. We&rsquo;ll be focusing on &ldquo;Should we use FlexClones?&rdquo; rather than &ldquo;How do we use FlexClones?&rdquo;</p>
<p>(By the way, check out these pages if you aren&rsquo;t familiar with NetApp <a href="http://www.netapp.com/products/enterprise-software/storage-system-software/resiliency/snapshot.html">Snapshots</a> and <a href="http://www.netapp.com/products/enterprise-software/storage-system-software/provisioning-volume-management/flexclone.html">FlexClones</a>.)</p>
<p>As I see it, there are two key benefits to using FlexClones in a VMware environment:</p>
<ul>
<li>
<p>First, FlexClones are <em>space conservative</em>, meaning that they occupy very little space. In fact, they only occupy the space required to store the changes to the FlexClone from the original. If you clone a 100GB volume and only 10% of that volume changes, you only need 10GB of disk space. I provide an example of the space utilization below.</p>
</li>
<li>
<p>Second, the time is takes to create a FlexClone is minimal and does not increase significantly with the amount of data involved. Creating a FlexClone of a 100GB volume is not significantly different in time required than creating a FlexClone of a 500GB volume.</p>
</li>
</ul>
<p>The storage space savings can be very significant, especially in larger deployments, and especially when extra care is taken to minimize changes from the original to the clone. Here&rsquo;s an example taken from my test lab:</p>
<pre><code>Volume               Allocated          Used    Guarantee
mstr_vdi_fvol       16956680KB     3024696KB       volume
vdi_fvol_clone1       399148KB      399148KB         none
vdi_fvol_clone2       704680KB      704680KB         none
vdi_fvol_clone3       440220KB      440220KB         none
</code></pre>
<p>As you can see above, each of the clones occupies less than 1% of the original volume&rsquo;s size. As the number of FlexClones multiplies, then the space savings grow proportionally. In very large deployments (VDI deployments, for example, where there may be 500, 700, or even 1,000 VMs), the storage reduction can be very substantial, and the cost savings associated with that storage reduction can be very sizable. These aren&rsquo;t just &ldquo;pie in the sky&rdquo; savings, either&mdash;we&rsquo;re talking real, measurable savings in the amount of SAN storage that must be purchased to host the VMs.</p>
<p>Both of these benefits stand in direct contrast to VirtualCenter cloning:</p>
<ul>
<li>
<p>Each clone is a 1:1 copy of the original and occupies the same amount of space as the original. Clone a 50GB VM and it will require 50GB of disk space.</p>
</li>
<li>
<p>The amount of time it takes to clone a VM is directly proportional to the size of the VM. A 50GB VM will take proportionately longer to clone than a 10GB VM.</p>
</li>
</ul>
<p>At first glance, it&rsquo;s easy to look at these benefits and say, &ldquo;Why <em>wouldn&rsquo;t</em> I want to use FlexClones? I can create additional VMs in seconds instead of minutes, and save tons of expensive Fibre Channel SAN storage. What&rsquo;s not to like?&rdquo; Those are very good questions. In <a href="/2007/05/17/netapp-flexclones-with-vmware-part-2/">Part 2</a> of this series, we&rsquo;ll take a look at some of the disadvantages of using FlexClones in VMware environments. In the meantime, feel free to add any clarifications, corrections, or questions in the comments below.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/netapp">NetApp</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/storage">Storage</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmware">VMware</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2007/05/14/who-didnt-see-this-coming/">Who Didn&#39;t See This Coming?</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2007/05/15/resizing-disks-inside-guests/">Resizing Disks Inside Guests</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2007%2f05%2f15%2fnetapp-flexclones-with-vmware-part-1%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2007%2f05%2f15%2fnetapp-flexclones-with-vmware-part-1%2f&text=NetApp%20FlexClones%20with%20VMware%2c%20Part%201" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2007%2f05%2f15%2fnetapp-flexclones-with-vmware-part-1%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2007/05/11/how-to-provision-vms-using-netapp-flexclones/">How to Provision VMs Using NetApp FlexClones</a> <span class="post-date-list">119 May 111111</span></li><li><a href="/2006/12/30/recovering-data-inside-vms-using-netapp-snapshots/">Recovering Data Inside VMs Using NetApp Snapshots</a> <span class="post-date-list">309 May 303030</span></li><li><a href="/2006/12/15/iscsi-from-netapp-to-esx-server/">iSCSI from NetApp to ESX Server</a> <span class="post-date-list">159 May 151515</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
