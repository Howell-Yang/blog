<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>VMworld 2007 Session on ESX Patch Management - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="VMworld 2007 Session on ESX Patch Management - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="VMworld 2007 Session on ESX Patch Management - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2007/09/12/vmworld-2007-session-on-esx-patch-management/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">VMworld 2007 Session on ESX Patch Management</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 129 May 121212 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/liveblog">Liveblog</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;897 words (estimated 5 minutes to read)</span>
  <p>I&rsquo;m getting ready to start another session (another super-session) on ESX patch management, presented by Brian Gallob. Incidentally, I met Brian on Monday night at the VMTN Communities get-together around the corner at the Thirsty Bear (username is BrianG on the forums). I think I heard there&rsquo;s about 1200 people registered for this session over in Room 103 of Moscone South, the same room used yesterday for the VC bullet-proofing session I attended.</p>
<p>Brian Gallob started out the session by setting some expectations; he&rsquo;s not going to make any significant product announcements in this session, and while VMware is working on something to help ease the patching problems, that solution is yet to be announced. With that expectation in place, Brian proceeded with the session.</p>
<p>Everyone agrees that patching is a necessary evil. Of course, some users (incorrectly) assume that ESX Server doesn&rsquo;t require patches, but that&rsquo;s a false assumption. ESX Server updates include bug fixes, new drivers, driver enhancements, etc., all of which can be valuable to the end users.</p>
<p>In contrast to earlier patching mechanisms, with ESX Server 3 patches are much more specific, users can &ldquo;pick and choose&rdquo; which updates are applicable, and there is (at most) a single reboot required. Many updates do not even require a reboot. There is also the new esxupdate tool to help with patching.</p>
<p>Patch notification occurs via e-mail to the e-mail address used during registration of the license; there is also notification posted to the VMTN and the downloads site at VMware (available at <a href="http://www.vmware.com/download/vi/vi3_patches.html">http://www.vmware.com/download/vi/vi3_patches.html</a>). Patches are classified into three categories:</p>
<ul>
<li>
<p>Security: These patches fix one or more security vulnerabilities, usually in the Service Console. They should be installed as quickly as possible.</p>
</li>
<li>
<p>Critical: These fix a bug or flaw in the software. The flaws that these patches address may cause data loss or severe service disruptions, and should be installed right away.</p>
</li>
<li>
<p>General: Ususally a fix for a minor flaw that might affect a small subset of customers. These patches should tested and, if applicable to your environment, installed.</p>
</li>
</ul>
<p>Red Hat packages should never be installed on ESX Server. Although the Service Console is based on Red Hat Enterprise Linux, Red Hat patches won&rsquo;t work and should be avoided.</p>
<p>The new download site (see the URL earlier) now contains a great deal more information that will make it easier to determine if a particular patch applies to your installation. The information available there includes:</p>
<ul>
<li>
<p>Download size</p>
</li>
<li>
<p>Brief description of the patch and a patch number (the patch number links back to a KB article about the patch)</p>
</li>
<li>
<p>Impact (reboot required?)</p>
</li>
<li>
<p>Supersedes or &ldquo;superseded by&rdquo; information</p>
</li>
</ul>
<p>All of this information can be used to determine if general patches are applicable. Security patches and critical patches are recommended to be installed as soon as possible.</p>
<p>With the release of ESX Server 3.0.2, patch installation order is no longer important. With earlier versions, however, patch should be installed in order <em>by release date</em>. Within a release date (say, all the patches released in June), order is not important. The June patches should be installed before the July patches, however.</p>
<p>What&rsquo;s in an update tarball? Some RPMs and header/descriptor information used by <code>esxupdate</code> (see below).</p>
<p>Some handy <code>esxupdate</code> commands are:</p>
<ul>
<li>
<p><code>esxupdate query</code> - Shows a list of all installed updates. Can use a &ldquo;-l&rdquo; (that&rsquo;s a lowercase &ldquo;L&rdquo;) to show additional information</p>
</li>
<li>
<p><code>esxupdate info &lt;updatename&gt;</code> - Shows information about a particular installed update; again, use &ldquo;-l&rdquo; (lowercase &ldquo;L&rdquo;) for additional information</p>
</li>
<li>
<p><code>esxupdate update &lt;updatename&gt;</code> - Installs the specified update; can use the &ldquo;-noreboot&rdquo; option to prevent a reboot, useful when installing multiple patches at the same time</p>
</li>
</ul>
<p>For additional information, the <code>/var/log/vmware/esxdupate.log</code> file contains additional information appended to the log every time esxupdate does something. Tools such as grep (a perennial favorite in these parts, as regular readers will know) can be used to pick up particular pieces of information. Brian particularly liked these two commands:</p>
<pre><code>grep -i summary esxupdate.log  
grep -i totals esxupdate.log
</code></pre>
<p>These commands will show more pertinent information on the patches installed, summary information, how many were installed and how many failed, etc.</p>
<p>To use repositories (instead of local update files), simply add the &ldquo;-r&rdquo; parameter with the location of the repository, like so:</p>
<pre><code>esxupdate -r file:/path/to/filename update  
esxupdate -r http://http server name/path/updatename update  
esxupdate -r ftp://ftp server name/path/updatename update
</code></pre>
<p>Brian also suggested the use of a shared VMFS3 LUN to store update files. That&rsquo;s a pretty handy idea.</p>
<p>Finally, we wrapped up the session with some general troubleshooting tips. Some useful tidbits from the final portion included:</p>
<ul>
<li>
<p>Don&rsquo;t use the &ldquo;-f&rdquo; option&mdash;even if recommended to do so by <code>esxupdate</code> itself&mdash;unless you do a lot of pre-work. If you do, you&rsquo;ll need to go back and re-apply patches. This problem is typically caused by installing patches out of order.</p>
</li>
<li>
<p>If you get errors trying to untar the update, verify the MD5 sums to ensure the file integrity has not been damaged. There are Windows-based utilities to calculate the MD5 sum.</p>
</li>
<li>
<p>Upgrade to version 2.0.2 of VirtualCenter <em>before</em> you upgrade any ESX hosts to version 3.0.2. Upgrading to 3.0.2 is recommended as it removes the patch installation order requirements.</p>
</li>
</ul>
<p>Finally, Brian mentioned an upcoming session at 3:30 PM about the future product VMware Update Manager. I&rsquo;d love to attend that session, but unfortunately I&rsquo;m already booked in another session. I need about 3 more of me around here!</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/esx">ESX</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmware">VMware</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmworld2007">VMworld2007</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2007/09/12/vmworld-2007-day-2-keynote-liveblog/">VMworld 2007 Day 2 Keynote Liveblog</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2007/09/12/vmworld-2007-session-on-advanced-diagnostics-log-analysis/">VMworld 2007 Session on Advanced Diagnostics Log Analysis</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2007%2f09%2f12%2fvmworld-2007-session-on-esx-patch-management%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2007%2f09%2f12%2fvmworld-2007-session-on-esx-patch-management%2f&text=VMworld%202007%20Session%20on%20ESX%20Patch%20Management" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2007%2f09%2f12%2fvmworld-2007-session-on-esx-patch-management%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2007/09/10/vmworld-2007-partner-day/">VMworld 2007 Partner Day</a> <span class="post-date-list">109 May 101010</span></li><li><a href="/2007/09/12/vmworld-2007-day-2-keynote-liveblog/">VMworld 2007 Day 2 Keynote Liveblog</a> <span class="post-date-list">129 May 121212</span></li><li><a href="/2007/09/12/other-vmworld-news-and-views/">Other VMworld News and Views</a> <span class="post-date-list">129 May 121212</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
