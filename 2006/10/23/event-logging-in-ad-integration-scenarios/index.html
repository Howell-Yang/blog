<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Event Logging in AD Integration Scenarios - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Event Logging in AD Integration Scenarios - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Event Logging in AD Integration Scenarios - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2006/10/23/event-logging-in-ad-integration-scenarios/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Event Logging in AD Integration Scenarios</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 239 May 232323 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/information">Information</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;534 words (estimated 3 minutes to read)</span>
  <p>To test what kind of logging occurs, I simply used my existing installation of <a href="http://www.microsoft.com/windowsserver2003/default.mspx">Windows Server 2003 R2</a> and Active Directory, for which the logging options had not been modified from their &ldquo;out of the box&rdquo; settings. From there, I cleared the security event logs and then attempted an SSH login to a <a href="http://www.centos.org/">CentOS</a> 4.3 server that has been configured for AD authentication via Kerberos (through PAM, not directly inside SSH).</p>
<p>After the login, I reviewed the event logs and found a large number of entries for the LDAP bind account (the account that is used to bind to Active Directory to retrieve account information, such as UID number, GID number, login shell, home directory, etc.). These are useless for identifying unique logons to Linux/Unix-based systems. However, there is one event that is useful&mdash;an event ID 672 with the following text:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>    Authentication Ticket Request:
</span></span><span style="display:flex;"><span>     	User Name:		bjones
</span></span><span style="display:flex;"><span>     	Supplied Realm Name:	EXAMPLE.NET
</span></span><span style="display:flex;"><span>     	User ID:			EXAMPLE\bjones
</span></span><span style="display:flex;"><span>     	Service Name:		krbtgt
</span></span><span style="display:flex;"><span>     	Service ID:		EXAMPLE\krbtgt
</span></span><span style="display:flex;"><span>     	Ticket Options:		0x40800000
</span></span><span style="display:flex;"><span>     	Result Code:		-
</span></span><span style="display:flex;"><span>     	Ticket Encryption Type:	0x17
</span></span><span style="display:flex;"><span>     	Pre-Authentication Type:	2
</span></span><span style="display:flex;"><span>     	Client Address:		172.16.28.111
</span></span><span style="display:flex;"><span>     	Certificate Issuer Name:	
</span></span><span style="display:flex;"><span>     	Certificate Serial Number:	
</span></span><span style="display:flex;"><span>     	Certificate Thumbprint:	
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    For more information, see Help and Support Center at 
</span></span><span style="display:flex;"><span>    http://go.microsoft.com/fwlink/events.asp.
</span></span></code></pre></div><p>As you can see, this entry clearly identifies the user that was authenticated as well as the IP address of the host to which the user logged in. Note that the IP address of the workstation from which the user logon originated is not captured here.</p>
<p>OK, that takes care of the typical Linux system. Now, what about <a href="http://www.sun.com/software/solaris/">Solaris</a> 10? I cleared the security event logs (saving them) and attempted an SSH logon to a Solaris server. As it turns out, Solaris 10 logs two event entries&mdash;event ID 672, as above, as well as event ID 673. The text for event ID 673 is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>    Service Ticket Request:
</span></span><span style="display:flex;"><span>     	User Name:		bjones@EXAMPLE.NET
</span></span><span style="display:flex;"><span>     	User Domain:		EXAMPLE.NET
</span></span><span style="display:flex;"><span>     	Service Name:		host-solarishost01
</span></span><span style="display:flex;"><span>     	Service ID:		EXAMPLE\host-solarishost01
</span></span><span style="display:flex;"><span>     	Ticket Options:		0x40800000
</span></span><span style="display:flex;"><span>     	Ticket Encryption Type:	0x3
</span></span><span style="display:flex;"><span>     	Client Address:		172.16.28.112
</span></span><span style="display:flex;"><span>     	Failure Code:		-
</span></span><span style="display:flex;"><span>     	Logon GUID:		{3a653f45-928c-1f72-2c59-ca951986ac42}
</span></span><span style="display:flex;"><span>     	Transited Services:	-
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    For more information, see Help and Support Center at 
</span></span><span style="display:flex;"><span>    http://go.microsoft.com/fwlink/events.asp.
</span></span></code></pre></div><p>This provides the same sort of information as well as the name of the service ticket that was requested by the host. (Keep in mind, too, that Solaris 10 logged both the event ID 672 <em>and</em> event ID 673, whereas CentOS logged only the event ID 672.)</p>
<p>But what about &ldquo;native&rdquo; Kerberos authentication, when a Kerberos ticket is used to authenticate the user? In this case, I tested three different operating systems: CentOS 4.3, Solaris 10, and <a href="http://www.openbsd.org/">OpenBSD</a> 3.9. In all three cases an event ID 673, similar to above, was logged. However, this time it was the IP address of my actual workstation&mdash;not the IP address of the server&mdash;that was included in the event log text.</p>
<p>In all of the tested scenarios, there was information that identified the specific account that was being authenticated. However, depending upon whether PAM was involved, the Windows event logs may or may not capture the actual IP address of the originating workstation. In almost all cases, though, the logs on the Linux, Solaris, or OpenBSD server would capture the IP address of the originating workstation, even if the Windows event logs did not.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/activedirectory">ActiveDirectory</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/centos">CentOS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/interoperability">Interoperability</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/kerberos">Kerberos</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/ldap">LDAP</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/linux">Linux</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/microsoft">Microsoft</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/security">Security</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/solaris">Solaris</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/unix">UNIX</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/windows">Windows</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2006/10/16/no-broad-openbsd-ad-integration/">No Broad OpenBSD-AD Integration</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2006/10/24/nexenta-alpha-6-on-esx-server/">Nexenta Alpha 6 on ESX Server</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2006%2f10%2f23%2fevent-logging-in-ad-integration-scenarios%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2006%2f10%2f23%2fevent-logging-in-ad-integration-scenarios%2f&text=Event%20Logging%20in%20AD%20Integration%20Scenarios" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2006%2f10%2f23%2fevent-logging-in-ad-integration-scenarios%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2006/09/01/kerberos-tgt-validation/">Kerberos TGT Validation</a> <span class="post-date-list">19 May 1011</span></li><li><a href="/2006/08/08/linux-active-directory-and-windows-server-2003-r2-revisited/">Linux, Active Directory, and Windows Server 2003 R2 Revisited</a> <span class="post-date-list">89 May 8088</span></li><li><a href="/2006/04/27/linux-ad-integration-with-windows-server-2003-r2/">Linux-AD Integration With Windows Server 2003 R2</a> <span class="post-date-list">279 May 272727</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
