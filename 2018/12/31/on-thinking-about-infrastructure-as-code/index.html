<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>On Thinking About Infrastructure as Code - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="On Thinking About Infrastructure as Code - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="On Thinking About Infrastructure as Code - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2018/12/31/on-thinking-about-infrastructure-as-code/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">On Thinking About Infrastructure as Code</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 319 May 313131 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/musing">Musing</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;884 words (estimated 5 minutes to read)</span>
  <p>I just finished reading Cindy Sridharan&rsquo;s excellent post titled &ldquo;<a href="https://medium.com/@copyconstruct/effective-mental-models-for-code-and-systems-7c55918f1b3e">Effective Mental Models for Code and Systems</a>,&rdquo; and some of the points Sridharan makes immediately jumped out to me&mdash;not for &ldquo;traditional&rdquo; code development, but for the development of infrastructure as code. Take a few minutes to go read the post&mdash;seriously, it&rsquo;s <em>really</em> good. Done reading it? Good, now we can proceed.</p>
<p>Some of these thoughts I was going to share in a planned presentation at Interop ITX in May 2019, but since I&rsquo;m unable to speak at the conference this year due to schedule conflicts (my son&rsquo;s graduation from college and a major anniversary trip for me and Crystal), I figured now was as good a time as any, especially given the timing of Sridharan&rsquo;s post. Also, a lot of these thoughts stem from a discussion with a colleague at work, which in turn led to <a href="https://packetpushers.net/podcast/full-stack-journey-027-understanding-infrastructure-as-code-and-terraform-with-curt-micol/">this Full Stack Journey podcast on practical infrastructure as code</a>.</p>
<p>Anyway, let me get back to Sridharan&rsquo;s post. One of the things that jumped out to me right away was Sridharan&rsquo;s proposed hierarchy of needs for code:</p>
<p><img src="/public/img/sridharan-hierarchy-needs.png" alt="Sridharan&amp;rsquo;s hierarcy of needs for code"></p>
<p>As you can see in the image (full credit for which belongs to Sridharan, as far as I know), making code <em>understandable</em> lies at the bottom of the hierarchy of needs, meaning it is the most basic necessity needed. Until this need is satisfied, you can&rsquo;t move on to the other needs. Sridharan puts it this way:</p>
<blockquote>
<p>Optimizing for understandability can result in optimizing for everything else on the hierarchy depicted above.</p>
</blockquote>
<p>Many readers have probably heard of <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">the DRY principle</a> when it comes to writing code. (DRY stands for Don&rsquo;t Repeat Yourself.) In many of the examples of infrastructure as code that I see online, the authors of these examples tend to use control structures such as Terraform&rsquo;s <code>count</code> construct when creating multiple infrastructure objects. I&rsquo;ll use some code that I wrote as an example: consider the use of a module to create a group of AWS instances as illustrated <a href="https://github.com/scottslowe/learning-tools/blob/master/terraform/aws/ic-module/main.tf">here</a>. Yes, there is very little repetition in this code. The code is modular and re-usable. But is it <em>understandable</em>? Have I optimized for understandability, and (by extension) all the other needs listed in Sridharan&rsquo;s hierarchy of needs for code?</p>
<p>Consider this as well: have I <em>really</em> violated the DRY principle if I were to explicitly spell out, with proper parameterization, the creation of each infrastructure object instead of using a <code>count</code> control structure or a module as a layer of abstraction? Is it not still true that there remains only &ldquo;a single, unambiguous, authoritative representation&rdquo; of each infrastructure object?</p>
<p>It seems to me that the latter approach&mdash;explicitly spelling out the creation of infrastructure objects in your infrastructure as code&mdash;may be a bit more verbose, but eminently more understandable and does not violate the DRY principle. It may not be as elegant, but as individuals creating infrastructure as code artifacts should be we optimizing for elegance, or optimizing for understandability?</p>
<p>Sridharan also talks about being explicit:</p>
<blockquote>
<p>&hellip;it is worth reiterating this again that implicit assumptions and dependencies are one of the worst offenders when it comes to contributing to the obscurity of code.</p>
</blockquote>
<p>Again, it seems to me that&mdash;for infrastructure as code especially&mdash;being explicit about the creation of infrastructure objects not only contributes to greater understandability, but also helps eliminate implicit assumptions and dependencies. Instead of using a loop or control structure to manage the creation of multiple objects, spell out the creation of those objects explicitly. It may seem like a violation of the DRY principle to have three (nearly) identical snippets of code creating three (nearly) identical compute instances, but applying the DRY principle here means ensuring that each instance is authoritatively represented in the code only once, not that we are minimizing lines of code.</p>
<p>&ldquo;Now wait,&rdquo; you say. &ldquo;It&rsquo;s not my fault if someone can&rsquo;t read my Terraform code. They need to learn more about Terraform, and then they&rsquo;ll better understand how the code works.&rdquo;</p>
<p>Well, Sridharan talks about that as well in a discussion of properly identifying the target audience of your artifacts:</p>
<blockquote>
<p>In general, when identifying the target audience and deciding what narrative they need to be exposed to in order to allow for them to get up and running quickly, it becomes necessary to consider the audience’s background, level of domain expertise and experience.</p>
</blockquote>
<p>Sridharan goes on to point out that in situations where both novices and veterans may be present in the target audience, the experience of the novice is key to determining the understandability of the code. So, if we are optimizing for understandability, can we afford to take a &ldquo;hands off&rdquo; approach to maintenance of the code by our successors? Can we be guaranteed that a successor tasked with maintaining our code will have the same level of knowledge and experience we have?</p>
<p>I&rsquo;ll stop here; there are more good points that Sridharan makes, but for now this post suffices to capture most of the thinking generated by the article when it comes to infrastructure as code. After I&rsquo;ve had some time to continue to parse Sridharan&rsquo;s article, I may come back with some additional thoughts. In the meantime, feel free <a href="https://twitter.com/scott_lowe">to engage with me on Twitter</a> if you have some thoughts or perspectives you&rsquo;d like to share on this matter.</p>

  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/automation">Automation</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/development">Development</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2018/12/31/linux-migration-december-2018-progress-report/">The Linux Migration: December 2018 Progress Report</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2019/01/11/technology-short-take-109/">Technology Short Take 109</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2018%2f12%2f31%2fon-thinking-about-infrastructure-as-code%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2018%2f12%2f31%2fon-thinking-about-infrastructure-as-code%2f&text=On%20Thinking%20About%20Infrastructure%20as%20Code" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2018%2f12%2f31%2fon-thinking-about-infrastructure-as-code%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2018/05/31/book-review-infrastructure-as-code/">Book Review: Infrastructure as Code</a> <span class="post-date-list">319 May 313131</span></li><li><a href="/2018/12/28/looking-back-2018-project-report-card/">Looking Back: 2018 Project Report Card</a> <span class="post-date-list">289 May 282828</span></li><li><a href="/2018/10/20/validating-raml-files-using-docker/">Validating RAML Files Using Docker</a> <span class="post-date-list">209 May 202020</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
