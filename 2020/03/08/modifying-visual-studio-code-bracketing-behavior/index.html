<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Modifying Visual Studio Code&#39;s Bracketing Behavior - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Modifying Visual Studio Code&#39;s Bracketing Behavior - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Modifying Visual Studio Code&#39;s Bracketing Behavior - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2020/03/08/modifying-visual-studio-code-bracketing-behavior/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Modifying Visual Studio Code&#39;s Bracketing Behavior</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 89 May 8088 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/explanation">Explanation</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;778 words (estimated 4 minutes to read)</span>
  <p>There are two things I&rsquo;ve missed since I switched from <a href="https://www.sublimetext.com/">Sublime Text</a> to <a href="https://code.visualstudio.com/">Visual Studio Code</a> (I switched in 2018). First, the <em>speed.</em> Sublime Text is <em>so</em> much faster than Visual Studio Code; it&rsquo;s insane. But, the team behind Visual Studio Code is working hard to improve performance, so I&rsquo;ve mostly resigned myself to it. The second thing, though, was the behavior of wrapping selected text in brackets (or parentheses, curly braces, quotes, etc.). That part has annoyed me for two years, until this past weekend I&rsquo;d finally had enough. Here&rsquo;s how I modified Visual Studio Code&rsquo;s bracketing behaviors.</p>
<p>Before I get into the changes, allow me to explain what I mean here. With Sublime Text, I used a package (similar to an extension in the VS Code world) called <a href="https://packagecontrol.io/packages/Bracketeer">Bracketeer</a>, and one of the things it allowed me to do was highlight a section of text, wrap it in brackets/braces/parentheses, and then&mdash;this part is the missing bit&mdash;it would <em>deselect the selected text and place my insertion point outside the closing character</em>. Now, this doesn&rsquo;t sound like a big deal, but let me assure you that it is. I didn&rsquo;t have to use any extra keystrokes to keep on typing, I didn&rsquo;t need to deselect the text manually, I didn&rsquo;t need to manually move my insertion point outside the closing bracket or brace or whatever. It was, in a word, glorious.</p>
<p>Visual Studio Code does not do this. There is no equivalent to Bracketeer that I&rsquo;ve been able to find. There is no documented setting I&rsquo;ve been able to locate that would emulate this behavior. Instead, if you select some text and wrap it in brackets or braces or whatever, the text <em>remains selected</em>. You have to double-tap the right arrow to deselect the text and move out of the brackets, or get the mouse involved. No good.</p>
<p>Fortunately, I finally found a workaround. It might be a hacky workaround, but it&rsquo;s a workaround nevertheless. There are two pieces: a snippet, and a keybinding.</p>
<p>First, the snippet. You&rsquo;ll need a snippet for each character (bracket, curly braces, parenethesis, single quote, double quote, backtick) whose &ldquo;wrapping&rdquo; behavior you want to modify. The snippet looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&#34;Brackets Wrap&#34;</span>: {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&#34;prefix&#34;</span>: <span style="color:#e6db74">&#34;brackwrap&#34;</span>,
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&#34;body&#34;</span>: [
</span></span><span style="display:flex;"><span>			<span style="color:#e6db74">&#34;[$TM_SELECTED_TEXT]$0&#34;</span>
</span></span><span style="display:flex;"><span>		],
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Wrap selected text in brackets and position cursor outside the closing bracket&#34;</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The magic here comes from <code>$TM_SELECTED_TEXT</code> and <code>$0</code>. The <code>$TM_SELECTED_TEXT</code> variable is replaced with the contents of the currently selected text in the editor. Since this snippet is for wrapping text in square brackets, you can see I&rsquo;ve surrounded the text with square brackets. The <code>$0</code> indicates the final position of the insertion point after the snippet has been inserted. In this case, the final position of the insertion point is just after the closing bracket. So, what will happen when I invoke this snippet is this:</p>
<ol>
<li>Code will place an opening square bracket before the selected text, and a closing square bracket after the selected text.</li>
<li>Code will place the insertion point after the closing bracket, deselecting the selected text in the process.</li>
</ol>
<p>Bam! Almost exactly what I was seeking. To make it just a &ldquo;natural&rdquo; part of how Code operates is where the keybinding comes in:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;[&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;editor.action.insertSnippet&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;when&#34;</span>: <span style="color:#e6db74">&#34;editorHasSelection &amp;&amp; editorLangId == markdown&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;args&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;langId&#34;</span>: <span style="color:#e6db74">&#34;markdown&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Brackets Wrap&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>The keybinding re-maps the keyboard so that when I press the <code>[</code> character when text is selected (note the <code>when</code> clause in there), it will insert the snippet I just showed you&mdash;in other words, when I press the <code>[</code> character when there&rsquo;s selected text, it will wrap the selected text in square brackets and then place my insertion point after the closing bracket. Bingo!</p>
<p>Finally, note the compound <code>when</code> clause, which ensures that this only fires when text is selected in a Markdown document. This keeps the keybinding from affecting other types of documents, where this behavior may not be desired. Oh, and here&rsquo;s a bonus&mdash;it works with multiple selections, too.</p>
<p>To emulate this same behavior for curly braces, single quotes, double quotes, or backticks, you&rsquo;ll need to define a snippet and a keybinding for each of them. Just change the character used to surround the text in the snippet, and then define a keybinding that re-maps that particular character on the keyboard.</p>
<p>There you have it! I know this seems silly in the grander scheme of things, but it has made my Visual Studio Code experience so much more pleasant. If you have questions, or if you have suggestions for improvement (maybe I missed something?), please feel free to <a href="https://twitter.com/scott_lowe">hit me up on Twitter</a>. Thanks for reading!</p>

  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/macos">macOS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/json">JSON</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/blogging">Blogging</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2020/03/05/ha-kubernetes-clusters-on-aws-with-cluster-api-v1alpha2/">HA Kubernetes Clusters on AWS with Cluster API v1alpha2</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2020/03/09/an-update-on-the-tokyo-assignment/">An Update on the Tokyo Assignment</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2020%2f03%2f08%2fmodifying-visual-studio-code-bracketing-behavior%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2020%2f03%2f08%2fmodifying-visual-studio-code-bracketing-behavior%2f&text=Modifying%20Visual%20Studio%20Code%27s%20Bracketing%20Behavior" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2020%2f03%2f08%2fmodifying-visual-studio-code-bracketing-behavior%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2020/03/02/technology-short-take-124/">Technology Short Take 124</a> <span class="post-date-list">29 May 2022</span></li><li><a href="/2015/11/14/handy-gui-tool-working-apis/">A Handy GUI Tool for Working with APIs</a> <span class="post-date-list">149 May 141414</span></li><li><a href="/2013/11/11/making-json-output-more-readable-with-bbedit/">Making JSON Output More Readable with BBEdit</a> <span class="post-date-list">119 May 111111</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
