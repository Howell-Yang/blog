<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Using Unison Across Linux, macOS, and Windows - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Using Unison Across Linux, macOS, and Windows - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Using Unison Across Linux, macOS, and Windows - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2020/06/01/using-unison-across-linux-macos-windows/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Using Unison Across Linux, macOS, and Windows</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 19 May 1011 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/explanation">Explanation</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;705 words (estimated 4 minutes to read)</span>
  <p>I recently wrapped up an instance where I needed to use the <a href="https://www.cis.upenn.edu/~bcpierce/unison/index.html">Unison file synchronization application</a> across Linux, macOS, and Windows. While Unison <em>is</em> available for all three platforms and <em>does</em> work across (and among) systems running all three operating systems, I did encounter a few interoperability issues while making it work. Here&rsquo;s some information on these interoperability issues, and how I worked around them. (Hopefully this information will help someone else.)</p>
<p>The use case here is to keep a subset of directories in sync between a MacBook Air running macOS &ldquo;Catalina&rdquo; 10.15.5 and a Surface Pro 6 running Windows 10. A system running Ubuntu 18.04.4 acted as the &ldquo;server&rdquo;; each &ldquo;client&rdquo; system (the MacBook Air and the Surface Pro) would synchronize with the Ubuntu system. I&rsquo;ve used a nearly-identical setup for several years to keep my systems synchronized.</p>
<p>One thing to know about Unison before I continue is that you need compatible versions of Unison on both systems in order for it to work. As I understand it, compatibility is not just based on version numbers, but also on the Ocaml version with which it was compiled.</p>
<p>With that in mind, I already had a working setup using Unison 2.48 so I started there. Unison 2.48.4 was installed and running on the Ubuntu system, and I installed Unison 2.48.15 on the new MacBook Air. I&rsquo;d used Unison 2.48.15 on macOS for quite a while, so I didn&rsquo;t test the installation right away, instead moving on to the Surface Pro. From this page hosting <a href="https://www.irif.fr/~vouillon/unison/">Windows binaries for Unison</a>, I downloaded a Unison 2.48.4 binary for Windows. Should be all set, right?</p>
<p>Unfortunately, I ran into a couple problems:</p>
<ul>
<li>The Windows binary has <a href="https://github.com/bcpierce00/unison/issues/218">an issue</a> where it won&rsquo;t recognize the preinstalled OpenSSH binary on Windows 10. So, I had to copy <code>ssh.exe</code> to the same directory as the Unison binary.</li>
<li>The Windows binary didn&rsquo;t like paths with spaces in the name; no style of quoting seemed to help. The only workaround I could find was to use <code>dir /X</code> to get the auto-generated short name, and use that in the Unison profile.</li>
</ul>
<p>Once past those two issues I managed to successfully get Unison to synchronize files between the Surface Pro and the Ubuntu system. Moving on to the MacBook Air&mdash;which I honestly suspected would be the easy step&mdash;I found Unison 2.48 crashed on macOS 10.15. Nothing would make it run without crashing.</p>
<p>Some continued research led me to find Windows and macOS builds of a newer version of Unison, version 2.51. The changelog referenced APFS support, which is what was being used on the MacBook Air. That should do it, right?</p>
<ul>
<li>Unison 2.51 wouldn&rsquo;t interoperate with the existing Unison 2.48 binary on the Ubuntu system. (Recall that I mentioned earlier that compatible versions of Unison were needed on both systems.)</li>
<li>There were no packaged versions of Unison 2.51 for Ubuntu.</li>
</ul>
<p>Fortunately, cloning <a href="https://github.com/bcpierce00/unison/">the GitHub repository</a> and building from source was pretty straightforward. I changed the filename of the new version (I used <code>unison-2.51.2</code>) and changed the &ldquo;servercmd&rdquo; setting in the Unison preferences on both the Surface Pro and the MacBook Air. Success! I was able to run Unison to synchronize files between the Surface Pro, the Ubuntu system, and the MacBook air running macOS 10.15.</p>
<p>Lessons learned?</p>
<ol>
<li>Unison&rsquo;s support on Windows for paths with spaces is tricky. Use <code>dir /X</code> to get the auto-generated short name and use that instead.</li>
<li>On Windows 10, you&rsquo;ll need to copy <code>ssh.exe</code> from <code>C:\Windows\System32\OpenSSH</code> to the directory where the Unison executable resides. Otherwise, Unison will be unable to initiate the SSH connection to the remote system.</li>
<li>If you&rsquo;re running macOS 10.15, be sure to use Unison 2.51. (This <em>may</em> apply to all systems running APFS, but I haven&rsquo;t verified that yet.)</li>
<li>Pre-compiled binaries for Unison 2.51 are available for both Windows and macOS, so that&rsquo;s probably the best version to use. For Linux, it&rsquo;s very likely you&rsquo;ll need to build from source in order to get a version 2.51 binary.</li>
</ol>
<p>I hope this information is helpful to others who may need to get Unison working across multiple systems. If you have corrections, suggestions for improvement, or feedback on how I can improve this post, please contact <a href="https://twitter.com/scott_lowe">me on Twitter</a>. Thanks!</p>

  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/linux">Linux</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/macos">macOS</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/windows">Windows</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2020/05/29/technology-short-take-127/">Technology Short Take 127</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2020/06/08/review-magic-mouse-2-and-magic-trackpad-2-on-fedora/">Review: Magic Mouse 2 and Magic Trackpad 2 on Fedora</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2020%2f06%2f01%2fusing-unison-across-linux-macos-windows%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2020%2f06%2f01%2fusing-unison-across-linux-macos-windows%2f&text=Using%20Unison%20Across%20Linux%2c%20macOS%2c%20and%20Windows" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2020%2f06%2f01%2fusing-unison-across-linux-macos-windows%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2020/03/02/technology-short-take-124/">Technology Short Take 124</a> <span class="post-date-list">29 May 2022</span></li><li><a href="/2018/12/21/technology-short-take-108/">Technology Short Take 108</a> <span class="post-date-list">219 May 212121</span></li><li><a href="/2018/04/27/technology-short-take-98/">Technology Short Take 98</a> <span class="post-date-list">279 May 272727</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
