<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Adding an Interface to an OpenStack Instance After Creation - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Adding an Interface to an OpenStack Instance After Creation - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Adding an Interface to an OpenStack Instance After Creation - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2015/10/21/add-interface-instance-after-creation/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Adding an Interface to an OpenStack Instance After Creation</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 219 May 212121 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/tutorial">Tutorial</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;438 words (estimated 3 minutes to read)</span>
  <p>In this post I&rsquo;ll share a few commands I found for adding a network interface to an OpenStack instance <em>after</em> launching the instance. You could, of course, simply launch the instance with multiple network interfaces from the very beginning, but these commands are handy in case you messed up or in case the requirements for the instance changed after it was launched. Please note there&rsquo;s nothing revolutionary or ground-breaking in the commands listed here; I&rsquo;m simply trying to help share information in the event others will find it useful.</p>
<p>I tested these commands using OpenStack &ldquo;Juno&rdquo; with VMware NSX providing the networking functionality for Neutron, but (as you can tell if you check the articles in the &ldquo;References&rdquo; section) this functionality has been around for a while. These commands <em>should</em> work with any supported Neutron plug-in.</p>
<p>First, create the Neutron network port:</p>
<pre><code>neutron port-create &lt;Neutron network name&gt;
</code></pre>
<p>If you want to attach a security group to the port (probably a good idea), then modify the command to look like this:</p>
<pre><code>neutron port-create --security-group &lt;Security group name&gt; \
&lt;Neutron network name&gt;
</code></pre>
<p>Note that you can add multiple <code>--security-group</code> parameters to the command in order to specify multiple security groups on the port.</p>
<p>You&rsquo;ll note in the output of the <code>neutron port-create</code> command it will tell you the IP address that has been assigned to this new port. Use the IP address to determine the new port&rsquo;s unique ID with this command:</p>
<pre><code>neutron port-list | awk '/&lt;IP address&gt;/ {print $2}'
</code></pre>
<p>I find it helpful to assign the port ID to an environment variable like this:</p>
<pre><code>PID=$(neutron port-list | awk '/&lt;IP address&gt;/ {print $2}')
</code></pre>
<p>Once you have the port&rsquo;s ID, you can attach the port to the instance:</p>
<pre><code>nova interface-attach --port-id $PID &lt;Nova instance name&gt;
</code></pre>
<p>This command assumes you assigned the port ID to an environment variable; if you didn&rsquo;t, simply supply the port ID you obtained earlier.</p>
<p>The new port will show up almost immediately in the instance; you can see it using <code>ip link list</code>. Note that you&rsquo;ll still need to perform any OS-specific configuration to make the interface fully functional.</p>
<p>If you later find out you no longer need this additional port attached to the instance, you can detach it with a command like this:</p>
<pre><code>nova interface-detach &lt;Nova instance name&gt; &lt;Port ID&gt;
</code></pre>
<p>(By the way, note the different order of the parameters in the <code>nova interface-attach</code> and <code>nova interface-detach</code> commands. The position of these parameters is, in fact, important.)</p>
<h2 id="references">References</h2>
<p>I found the following sites extremely helpful in figuring out the commands shown in this post:</p>
<p><a href="http://blog.aaronorosen.com/openstack-interface-hot-plugging/">OpenStack Interface Hot Plugging</a><br>
<a href="http://thornelabs.net/2014/09/03/configure-multiple-network-interfaces-on-an-openstack-instance.html">Configure Multiple Network Interfaces on an OpenStack Instance</a></p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/openstack">OpenStack</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/cli">CLI</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/linux">Linux</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2015/10/21/tokyo-summit-prayer-time/">Prayer Time at Tokyo Summit</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2015/10/22/technology-short-take-55/">Technology Short Take #55</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2015%2f10%2f21%2fadd-interface-instance-after-creation%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2015%2f10%2f21%2fadd-interface-instance-after-creation%2f&text=Adding%20an%20Interface%20to%20an%20OpenStack%20Instance%20After%20Creation" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2015%2f10%2f21%2fadd-interface-instance-after-creation%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2015/03/10/technology-short-take-49/">Technology Short Take #49</a> <span class="post-date-list">109 May 101010</span></li><li><a href="/2014/02/19/using-curl-to-interact-with-a-restful-api/">Using Curl to Interact with a RESTful API</a> <span class="post-date-list">199 May 191919</span></li><li><a href="/2014/02/06/technology-short-take-38/">Technology Short Take #38</a> <span class="post-date-list">69 May 6066</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
