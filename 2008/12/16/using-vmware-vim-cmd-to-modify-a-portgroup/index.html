<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Using vmware-vim-cmd to Modify a Portgroup - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="Using vmware-vim-cmd to Modify a Portgroup - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="Using vmware-vim-cmd to Modify a Portgroup - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2008/12/16/using-vmware-vim-cmd-to-modify-a-portgroup/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">Using vmware-vim-cmd to Modify a Portgroup</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 169 May 161616 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/explanation">Explanation</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;284 words (estimated 2 minutes to read)</span>
  <p>While creating a command-line configuration guide for a design that I&rsquo;d prepared, I found myself in need of a command that sets the NIC failover order explicitly for a portgroup. I suspected&mdash;and was correct&mdash;that <code>vmware-vim-cmd</code> would do the job, but was having a hard time finding documentation on the correct syntax. Even the <a href="http://knowledge.xtravirt.com/white-papers/scripting.html">extensive XtraVirt <code>vimsh</code> white paper</a> did not have information on the syntax. After a little bit of digging around, I found the information for which I was looking. Here it is for future benefit.</p>
<p>The syntax for using <code>vmware-vim-cmd</code> to modify the NIC failover order for a portgroup looks like this:</p>
<pre><code>vmware-vim-cmd hostsvc/net/portgroup_set --nicorderpolicy-active=&lt;List of NICs&gt; &lt;vSwitch#&gt; &lt;Portgroup&gt;
</code></pre>
<p>If the portgroup name includes spaces, then wrap the portgroup name in double quotes, like this:</p>
<pre><code>vmware-vim-cmd hostsvc/net/portgroup_set --nicorderpolicy-active=vmnic0 vSwitch0 &quot;Service Console&quot;
</code></pre>
<p>That sets only the active NICs. Any NICs not included in the command above are set to Unused, which is generally not the desired result. Usually, we&rsquo;d want those to be Standby NICs. To set the standby NICs, use this command:</p>
<pre><code>vmware-vim-cmd hostsvc/net/portgroup_set --nicorderpolicy-standby=&lt;List of VMNICs&gt; &lt;vSwitch#&gt; &lt;Portgroup&gt;
</code></pre>
<p>Run the command to set the active NICs first, then run the command to set the standby NICs. The following example will set vmnic0 as Active and vmnic1 as standby for the Service Console port group on vSwitch0:</p>
<pre><code>vmware-vim-cmd hostsvc/net/portgroup_set --nicorderpolicy-active=vmnic0 vSwitch0 &quot;Service Console&quot;  

vmware-vim-cmd hostsvc/net/portgroup_set --nicorderpolicy-standby=vmnic1 vSwitch0 &quot;Service Console&quot;
</code></pre>
<p>I hope this is helpful to some readers.</p>
<p><strong>UPDATE:</strong> A reader clarified in the comments that the parameters can actually be combined into a single command, like so:</p>
<pre><code>vmware-vim-cmd hostsvc/net/portgroup_set --nicorderpolicy-active=vmnic0 --nicorderpolicy-standby=vmnic1 vSwitch0 &quot;Service Console&quot;
</code></pre>
<p>I tested this syntax on VMware ESX 3.5 Update 3 and it does work as expected. Thanks, Timo!</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/esx">ESX</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/networking">Networking</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmware">VMware</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2008/12/15/enabling-enhanced-vmxnet/">Enabling Enhanced VMXNet</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2008/12/19/vmware-esx-networking-articles/">VMware ESX Networking Articles</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2008%2f12%2f16%2fusing-vmware-vim-cmd-to-modify-a-portgroup%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2008%2f12%2f16%2fusing-vmware-vim-cmd-to-modify-a-portgroup%2f&text=Using%20vmware-vim-cmd%20to%20Modify%20a%20Portgroup" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2008%2f12%2f16%2fusing-vmware-vim-cmd-to-modify-a-portgroup%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2008/12/15/enabling-enhanced-vmxnet/">Enabling Enhanced VMXNet</a> <span class="post-date-list">159 May 151515</span></li><li><a href="/2008/10/08/more-on-vmware-esx-nic-utilization/">More on VMware ESX NIC Utilization</a> <span class="post-date-list">89 May 8088</span></li><li><a href="/2008/09/15/follow-up-on-the-vdc-os-announcement/">Follow Up on the VDC-OS Announcement</a> <span class="post-date-list">159 May 151515</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
