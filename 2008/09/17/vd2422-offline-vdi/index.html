<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"><head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>VD2422: Offline VDI - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</title>

  
  <meta name="author" content="Howell Yang">
  <meta property="og:site_name" content="Scott&#39;s Weblog">
  
  <meta property="og:description" content="VD2422: Offline VDI - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  <meta property="og:title" content="VD2422: Offline VDI - Howell Yang&#39;s Weblog - 我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。">
  
  <meta property="og:type" content="article">
  <meta name="keywords" content="Cloud, Containers, Kubernetes, K8s, Docker, CNI, CRI-O, OCI, Linux, CLI, Networking, AWS, Security, DevOps">

  
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="/public/font-awesome/css/font-awesome.min.css">

  
  <link rel="canonical" href="https://www.howellyang.com/2008/09/17/vd2422-offline-vdi/">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  
  </head>
<body class="theme-base-0d">
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p><img src="/public/img/orbits-thumb.gif" alt="Orbits" width="128" height="128" /></p>
    <p>Original, technical content centered around cloud computing, Kubernetes, Linux, and networking</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="/">Home</a>
    <a class="sidebar-nav-item" href="/about/">About</a>
    <a class="sidebar-nav-item" href="/archives/">Site Archives</a>
    <a class="sidebar-nav-item" href="/categories/">Post Categories</a>
    <a class="sidebar-nav-item" href="/tags/">Content Tags</a>
  </nav>

  <div class="sidebar-item">
    <p>
      <a href="https://github.com/howellyang"><i class="fa fa-github fa-3x"></i></a>
      <a href="https://twitter.com/None"><i class="fa fa-twitter fa-3x"></i></a>
      <a href="https://www.linkedin.com/in/None"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="http://feeds.scottlowe.org/slowe/content/feed/"><i class="fa fa-rss fa-3x"></i></a>
    </p>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2005-2022. All rights reserved.</p>
  </div>
</div>

    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Howell Yang&#39;s Weblog</a>
            <small>我是杨豪，专注于深度学习模型的训练、剪枝、量化、部署以及工程效率优化。欢迎来到我的博客。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
<div class="post">
  <h1 class="post-title">VD2422: Offline VDI</h1>
  <span class="post-date"><i class="fa fa-calendar" aria-hidden="true"></i>&#160;Published on 179 May 171717 &middot;
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>&#160;Filed in <a href="/categories/liveblog">Liveblog</a> &middot;
    <i class="fa fa-pencil" aria-hidden="true"></i>&#160;1115 words (estimated 6 minutes to read)</span>
  <p>This is VD2422, and the presenter is Chris Leroy from VMware.</p>
<p>I arrived at this session late (about 15 minutes late) after running into a customer in the Solutions Exchange. This session is about offline VDI, which is the ability for users to check out VMs and run them while disconnected from the &ldquo;traditional&rdquo; VI environment.</p>
<p>As I came in, the presenter was showing off the check-out process, in which the user uses the VDM Client to check out a VM. As part of that check out process, the VM is copied to the client. Depending upon the size of the VM, this may take some time. VI administrators will also see a variety of tasks that get spawned as a result of checking out a VM, and controls for that VM such as pause, resume, power off, power on, etc., are all disabled while the VM is checked out.</p>
<p>The menus in the VDM Client are context-sensitive; the menus change from &ldquo;Check Out&rdquo; to &ldquo;Check In&rdquo; depending upon the status of the VM. Other commands may also appear based on the status of the check-in/check-out process itself. For example, there is a &ldquo;Cancel Check Out&rdquo; during the process of checking out a VM.</p>
<p>VirtualCenter uses snapshots as a &ldquo;checkpoint&rdquo; for the check-out/check-in process. By using snapshots in this way, the check in process is incremental, meaning that only the changed data needs to be transmitted back to the VI environment.</p>
<p>One thing that I didn&rsquo;t see during the check-in/check-out demos and description was the use of the &ldquo;fast start&rdquo; VMDK streaming technology that was discussed last year in San Francisco at VMworld 2007.</p>
<p>Next the presenter showed how to use policy to control access to checking out a VM. For example, an administrator can set a policy that prevents a user from checking in an offline VM; in this instance, the user essentially has to &ldquo;throw away&rdquo; changes made while the VM instance was offline.</p>
<p>In addition, the offline VM functionality uses encryption technology&mdash;presumably taken from VMware&rsquo;s ACE product offering&mdash;to secure the data while it is outside the VI environment. Even the client-side UI looks exactly like stuff taken from VMware ACE and VMware Player. (This isn&rsquo;t necessarily a bad thing, by the way; it shows that VMware is leveraging additional products, like they should.)</p>
<p>The presenter was using a variety of video clips to demonstrate the functionality; in the next clip, he showed the VDM Connection Server being shutdown to simulate a user actually being disconnected or away from the corporate network. In this instance, the VDM Client recognizes that it no longer has a connection to VDM and certain actions are disabled as a result.</p>
<p>Getting into the technical details, the offline VM is a full copy of the VM that is encrypted using 128-bit AES encryption. Authentication through VDM Client is required; you can&rsquo;t run the VM in ACE, Player, or Workstation, and it can only run on the client device to which it was copied.</p>
<p>Access to an offline desktop is controlled via Active Directory and entitlements. VDM includes policies to control offline desktops; these policies include whether or not a VM may even be checked out, how long a VM may remain checked out until it needs to contact the VDM server, whether or not USB devices or printing is allowed, whether a user is allowed to perform a rollback, or whether Single Sign On is permitted.</p>
<p>Regarding VDM authentication (note that VDM authentication is required in order to run the offline desktop), the VDM client creates an offline challenge built on the last successful online authentication. I&rsquo;m glad the presenter discussed that; I was wondering how that would be handled.</p>
<p>As expected, the VDM client will periodically try to reconnect and update policies.</p>
<p>When authentication occurs offline (using the offline challenge), a full online authentication may be required in order to perform sensitive operations. Authentication using RSA, for example, might be required after an offline authentication once connectivity is re-established.</p>
<p>Offline VDI uses a stripped down version of VMware Player, and requires the full Win32 VDM Client (you can&rsquo;t use the web interface). On the server side, VMs are locked when they are checked out. VDM also knows how to speak to VI, but APIs had to be extended to allow check-in/check-out and to build logic around how to handle checked-out desktops.</p>
<p>Data is transferred using the same VMware internal protocol that VMware Converter and VI cloning/provisioning uses when data is transferred between the client and a VMware ESX server. Only changed blocks are transferred, although some file system optimizations are used. There is some support for data compression, can be paused or resumed, and can travel inside SSL via the VDM Secure Gateway.</p>
<p>When multiple transfers are in place, the load is balanced across VMware ESX server according to a calculation of &ldquo;transfer slots&rdquo;. VMware ESX servers can be configured with how many transfer slots they are given.</p>
<p>The flow of a checkout request:</p>
<ul>
<li>
<p>Client sends a checkout request</p>
</li>
<li>
<p>VDM server validates the request (checks the policies, verifies the disk space that the client needs, qualifies the VM configuration)</p>
</li>
<li>
<p>VDM then powers down the VM, takes a snapshot of the VM, enumerates the data that the client needs, and the generates a new VM configuration based on the existing VM on the VI environment</p>
</li>
<li>
<p>The client merges the new offline desktop configuration with any existing configuration</p>
</li>
<li>
<p>The client transfers the data it needs, as determined by the enumeration process earlier</p>
</li>
</ul>
<p>A check-in request is a bit simpler:</p>
<ul>
<li>
<p>Enumerate the data in the offline desktop&rsquo;s disks that need to be transferred back to the server</p>
</li>
<li>
<p>Transfer the data back to the server</p>
</li>
<li>
<p>Remove the lock on the desktop</p>
</li>
</ul>
<p>There are a few limitations. Only Windows XP is supported, and small number of concurrent check-ins and check-outs are supported. There is no support for non-persistent desktop pools, and there is no support for View Composer (Scalable Virtual Image, or SVI).</p>
<p>For future enhancements, VMware is considering the use case when the user primarily works from the client desktop. In this instance, check-in processes are more likely to be background processes that should be initiated automatically. These are essentially considered to be restore points or for alternative access. This use case could extend the reach of VDI quite extensively.</p>
<p>More future work is being spent on integration between offline VDI and View Composer. Finally, consideration is being given to allowing offline VDI to work on platforms other than Windows, such as Mac OS X or Linux (note that earlier it was stated that the Win32 VDM Client is required for offline VDI).</p>
<p>At this point, the presenter closed the session.</p>


  <h3>Metadata and Navigation</h3>
  <span class="post-meta">
  <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vdi">VDI</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/virtualization">Virtualization</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmware">VMware</a> <i class="fa fa-tag" aria-hidden="true"></i>&#160;<a href="/tags/vmworld2008">VMworld2008</a> 

  <br />
  <i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous Post: <a href="https://www.howellyang.com/2008/09/17/very-brief-thoughts-on-the-keynote/">Very Brief Thoughts on the Keynote</a>
  
  <br />
   <i class="fa fa-arrow-circle-right" aria-hidden="true"></i> Next Post: <a href="https://www.howellyang.com/2008/09/17/ta2659-managing-esx-in-a-cos-less-world/">TA2659: Managing ESX in a COS-less World</a>
  </span>

  <span class="post-sharing">
  <p>Be social and share this post!<br />

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.howellyang.com%2f2008%2f09%2f17%2fvd2422-offline-vdi%2f" title="Share on Facebook"><i class="fa fa-facebook-square fa-2x"></i></a>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.howellyang.com%2f2008%2f09%2f17%2fvd2422-offline-vdi%2f&text=VD2422%3a%20Offline%20VDI" title="Share on Twitter"><i class="fa fa-twitter-square fa-2x"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2fwww.howellyang.com%2f2008%2f09%2f17%2fvd2422-offline-vdi%2f" title="Share on Google Plus"><i class="fa fa-google-plus-square fa-2x"></i></a></p>
  </span>
</div>

<div class="related">
  <h3>Related Posts</h3>
  <ul class="related-posts">
  <li><a href="/2008/09/17/very-brief-thoughts-on-the-keynote/">Very Brief Thoughts on the Keynote</a> <span class="post-date-list">179 May 171717</span></li><li><a href="/2008/09/09/virtualization-short-take-18/">Virtualization Short Take #18</a> <span class="post-date-list">99 May 9099</span></li><li><a href="/2008/08/28/virtualization-short-take-17/">Virtualization Short Take #17</a> <span class="post-date-list">289 May 282828</span></li>
  </ul>
</div>      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
